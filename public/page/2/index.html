<!DOCTYPE html>
<html lang="en" dir="auto">

<head>
	<meta name="generator" content="Hugo 0.145.0"><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>@h12</title>

<meta name="description" content="">
<meta name="author" content="Hǎi-Liàng &#34;Hal&#34; Wáng">
<link rel="canonical" href="http://h12.io/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.ce070fd93767a8b63ae3f5af1b6969cdffdcbb67b13dabab1ad1e4d21bbfdf55.css" integrity="sha256-zgcP2TdnqLY64/WvG2lpzf/cu2exPaurGtHk0hu/31U=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://h12.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://h12.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://h12.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://h12.io/apple-touch-icon.png">
<link rel="mask-icon" href="http://h12.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://h12.io/index.xml">
<link rel="alternate" hreflang="en" href="http://h12.io/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">





<link id="syntax-mode" rel="stylesheet" href="/css/syntax-light.css">

<script>
    function isDarkMode() {
        const mode = localStorage.getItem("pref-theme");
        return (mode && mode === "dark") ||
            document.body.className.includes("dark") ||
            false;
    }

    function syncSyntaxMode() {
        document.getElementById("syntax-mode").href = isDarkMode() ? "/css/syntax-dark.css" : "/css/syntax-light.css";
    }

    document.addEventListener("DOMContentLoaded", () => {
        syncSyntaxMode();
        const toggleButton = document.getElementById("theme-toggle");
        if (!toggleButton) {
            console.log("No toggle button found");
            return;
        }
        toggleButton.addEventListener("click", syncSyntaxMode);
    });
</script>

<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$','$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true
    },
    options: {
      enableMenu: false,
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
  };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=PT+Sans+Narrow:wght@400;700&family=PT+Serif:wght@400&display=swap">
<meta property="og:url" content="http://h12.io/">
  <meta property="og:site_name" content="@h12">
  <meta property="og:title" content="@h12">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="@h12">
<meta name="twitter:description" content="">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "@h12",
  "url": "http://h12.io/",
  "description": "",
  "logo": "http://h12.io/favicon.ico",
  "sameAs": [
      
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://h12.io/" accesskey="h" title="@h12 (Alt + H)">@h12</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://h12.io/article/" title="Articles">
                    <span><i class="fas fa-newspaper"></i> Articles</span>
                </a>
            </li>
            <li>
                <a href="http://h12.io/project/" title="Projects">
                    <span><i class="fab fa-github"></i> Projects</span>
                </a>
            </li>
            <li>
                <a href="http://h12.io/note/" title="Notes">
                    <span><i class="fas fa-sticky-note"></i> Notes</span>
                </a>
            </li>
            <li>
                <a href="http://h12.io/about/" title="About">
                    <span><i class="fas fa-user"></i> About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">JavaScript Surprises to a Go Developer
    </h2>
  </header>
  <div class="entry-content">
    <p>The scope of var is wrong Never use var to declare variables, use let instead.
REF
== is conversion and comparison What you really need is ===, which is similar to comparing two interface{}.
=== is shallow {a:1}==={a:1} is false, while Go struct with string are compared by contents (but not for slice).
Also this affects map key comparison. So object key is not so useful in JS as struct key in Go. The equality test is always on the references rather than the contents.
...</p>
  </div>
  <footer class="entry-footer"><span title='2019-02-12 11:32:07 +0000 UTC'>February 12, 2019</span></footer>
  <a class="entry-link" aria-label="post link to JavaScript Surprises to a Go Developer" href="http://h12.io/note/js-surprises/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Run: Graceful Goroutine Orchestration
    </h2>
  </header>
  <div class="entry-content">
    <p>
Overview While Go provides goroutines, channels and selects as first-class citizens to support concurrent programming, it is not trivial to combine these elements to address important concerns of goroutine orchestration, e.g. error handling, panic recovery, goroutine leak prevention, goroutine reuse, goroutine throttle and logging.
The package provides a mini-framework to address those cross-cutting concerns.
Quick start go get -u h12.io/run Here is an example illustrating the usage of the goroutine pool and the group. The task is described in the “Google Search 2.0” page from this slide.
...</p>
  </div>
  <footer class="entry-footer"><span title='2018-12-14 00:00:00 +0000 UTC'>December 14, 2018</span></footer>
  <a class="entry-link" aria-label="post link to Run: Graceful Goroutine Orchestration" href="http://h12.io/project/run/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">How to Start Godoc on Mac
    </h2>
  </header>
  <div class="entry-content">
    <p>Fish:
godoc -http=:6060 &amp;; disown (pidof godoc) Bash:
godoc -http=:6060 &amp;; disown `pidof godoc` And pidof can be installed with Homebrew.
</p>
  </div>
  <footer class="entry-footer"><span title='2018-05-05 16:02:07 +0800 +0800'>May 5, 2018</span></footer>
  <a class="entry-link" aria-label="post link to How to Start Godoc on Mac" href="http://h12.io/note/start-godoc/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Tmux Cheatsheet on Mac
    </h2>
  </header>
  <div class="entry-content">
    <p>Create a new session with iTerm2 integration tmux -CC new -s [session-name] Attach to a session with iTerm2 integration tmux -CC attach -t [session-name] </p>
  </div>
  <footer class="entry-footer"><span title='2018-04-20 10:14:06 +0800 +0800'>April 20, 2018</span></footer>
  <a class="entry-link" aria-label="post link to Tmux Cheatsheet on Mac" href="http://h12.io/note/tmux-cheatsheet/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">How to Diff two JSON Files
    </h2>
  </header>
  <div class="entry-content">
    <p>Just sort the keys first!
Example:
cat a.json | jq --sort-keys . &gt; aa.json cat b.json | jq --sort-keys . &gt; bb.json vimdiff aa.json bb.json </p>
  </div>
  <footer class="entry-footer"><span title='2018-04-10 12:07:27 +0800 +0800'>April 10, 2018</span></footer>
  <a class="entry-link" aria-label="post link to How to Diff two JSON Files" href="http://h12.io/note/how-to-diff-json-files/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Pagination Done Right
    </h2>
  </header>
  <div class="entry-content">
    <p>Server side pagination is intrinsically not accurate, as long as the data is dynamic.
The data items could be inserted, deleted or changed on the server side while the user goes forward and backward among the pages.
However, there is an algorithm that can keep the pagination as stable as possible:
encode the id and sorting fields of last value in a page as the continue-token return the continue-token along with each page the client must pass the continue-token to fetch the next page the next page starts with value &gt; continue-token || (value == continue-token &amp;&amp; value.id &gt; continue-token.id) Reference Pagination with Dynamic Data Loading </p>
  </div>
  <footer class="entry-footer"><span title='2018-02-28 13:38:45 +0800 +0800'>February 28, 2018</span></footer>
  <a class="entry-link" aria-label="post link to Pagination Done Right" href="http://h12.io/note/pagination-done-right/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">buid: Bipartite Unique Identifier
    </h2>
  </header>
  <div class="entry-content">
    <p>A BUID is a 128-bit unique ID composed of two 64-bit parts: shard and key.
It is not only a unique ID, but also contains the sharding information, so that the messages with the same BUID could be stored together within the same DB shard.
Also, when a message is stored in a shard, the shard part of the BUID can be trimmed off to save the space, and only the key part needs to be stored as the primary key.
...</p>
  </div>
  <footer class="entry-footer"><span title='2017-11-15 20:00:00 +0800 +0800'>November 15, 2017</span></footer>
  <a class="entry-link" aria-label="post link to buid: Bipartite Unique Identifier" href="http://h12.io/project/buid/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">How to Measure Response Time with Curl
    </h2>
  </header>
  <div class="entry-content">
    <p>curl [args] --write-out &#34;%{time_total}s&#34; --output /dev/null --silent [URL] </p>
  </div>
  <footer class="entry-footer"><span title='2017-06-20 12:40:10 +0800 +0800'>June 20, 2017</span></footer>
  <a class="entry-link" aria-label="post link to How to Measure Response Time with Curl" href="http://h12.io/note/measure-response-time-with-curl/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">How to Delete a Git Branch
    </h2>
  </header>
  <div class="entry-content">
    <p>git fetch --prune origin git branch --delete [branch-name] git push origin --delete [branch-name] </p>
  </div>
  <footer class="entry-footer"><span title='2017-06-09 13:41:44 +0800 +0800'>June 9, 2017</span></footer>
  <a class="entry-link" aria-label="post link to How to Delete a Git Branch" href="http://h12.io/note/delete-git-branch/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">A Single Command to Download a Website
    </h2>
  </header>
  <div class="entry-content">
    <p>wget --recursive --level=2 --no-parent --no-clobber --convert-links --continue [URL] </p>
  </div>
  <footer class="entry-footer"><span title='2017-04-09 14:30:03 +0800 +0800'>April 9, 2017</span></footer>
  <a class="entry-link" aria-label="post link to A Single Command to Download a Website" href="http://h12.io/note/download-website/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="http://h12.io/">
      «&nbsp;Prev&nbsp;
    </a>
    <a class="next" href="http://h12.io/page/3/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><footer class="footer">
        <p>&copy; 2012-2025, <span class="my-name">Hǎi-Liàng "Hal" Wáng</span>.</p>
        <p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><span property="dct:title">The content of this page</span> is licensed under <a href="https://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-flex;align-items:center;">CC BY 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" alt=""></a></p>
    </footer>


<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
