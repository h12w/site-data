<!DOCTYPE html>
<html lang="en">
    <head>
	<meta name="generator" content="Hugo 0.53" />
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title> Hai-Liang &#34;Hal&#34; Wang </title>
        <link rel="shortcut icon" href="/img/favicon.png" />

        <style>
            html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}html{line-height:1}ol,ul{list-style:none}table{border-collapse:collapse;border-spacing:0}caption,th,td{text-align:left;font-weight:normal;vertical-align:middle}q,blockquote{quotes:none}q:before,q:after,blockquote:before,blockquote:after{content:"";content:none}a img{border:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}@font-face{font-family:'Alegreya';font-style:normal;font-weight:400;src:url("/font/Alegreya400normal.ttf") format("truetype"),url("/font/Alegreya400normal.woff") format("woff"),url("/font/Alegreya400normal.eot") format("embedded-opentype")}@font-face{font-family:'Alegreya';font-style:italic;font-weight:400;src:url("/font/Alegreya400italic.ttf") format("truetype"),url("/font/Alegreya400italic.woff") format("woff"),url("/font/Alegreya400italic.eot") format("embedded-opentype")}@font-face{font-family:'Alegreya';font-style:normal;font-weight:700;src:url("/font/Alegreya700normal.ttf") format("truetype"),url("/font/Alegreya700normal.woff") format("woff"),url("/font/Alegreya700normal.eot") format("embedded-opentype")}@font-face{font-family:'Open Sans Condensed';font-style:normal;font-weight:300;src:url("/font/OpenSansCondensed300normal.ttf") format("truetype"),url("/font/OpenSansCondensed300normal.woff") format("woff"),url("/font/OpenSansCondensed300normal.eot") format("embedded-opentype")}@font-face{font-family:'Open Sans Condensed';font-style:italic;font-weight:300;src:url("/font/OpenSansCondensed300italic.ttf") format("truetype"),url("/font/OpenSansCondensed300italic.woff") format("woff"),url("/font/OpenSansCondensed300italic.eot") format("embedded-opentype")}html{font-size:118.75%;line-height:1.57895em}*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}html{font-family:Alegreya,sans-serif;background:#262626;color:#d9d9d9;-webkit-transform:translate3d(0, 0, 0)}.container{max-width:37.5rem;margin-left:auto;margin-right:auto}.container:after{content:" ";display:block;clear:both}h1,h2,h3,h4,h5,h6{font-family:"Open Sans Condensed",sans}a{text-decoration:none}a{color:#75A6C4}a:hover{color:#a9c8da;text-decoration:none}em{font-style:italic}strong{color:#fff}code{font-family:Menlo,Consolas,"Ubuntu Mono",monospace,sans;background-color:#1a1a1a;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px;font-size:.89474rem;line-height:1.57895rem;white-space:pre}p code,li code{padding:0.15rem}pre code{word-wrap:break-word;white-space:pre-wrap;padding-left:0.5rem;padding-right:0.5rem;display:block}code.mathjax{-webkit-font-smoothing:antialiased;background:inherit !important;border:none !important;font-size:100%}table{font-family:Menlo,Consolas,"Ubuntu Mono",monospace,sans;border:1px solid #8c8c8c;margin-left:auto;margin-right:auto}thead,tfoot{border:1px solid #8c8c8c}th,td{padding:0.1rem 0.5rem;text-align:center;background-color:#1a1a1a}#logo{float:left;padding-left:.78947rem;line-height:2.36842rem;height:2.36842rem}@font-face{font-family:'icon';src:url("../font/icon.eot?15086725");src:url("../font/icon.eot?15086725#iefix") format("embedded-opentype"),url("../font/icon.woff2?15086725") format("woff2"),url("../font/icon.woff?15086725") format("woff"),url("../font/icon.ttf?15086725") format("truetype"),url("../font/icon.svg?15086725#icon") format("svg");font-weight:normal;font-style:normal}[class^="icon-"]:before,[class*=" icon-"]:before{font-family:"icon";font-style:normal;font-weight:normal;speak:none;display:inline-block;text-decoration:inherit;width:1em;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-article:before{content:'󰀀'}.icon-project:before{content:'󰀁'}.icon-note:before{content:'󰀂'}.icon-slide:before{content:'󰀃'}.icon-about:before{content:'󰀄'}.icon-menu:before{content:'󰀅'}nav{padding-left:.78947rem;padding-right:.78947rem;padding-top:0;padding-bottom:0}#nav-toggle-check{display:none}#nav-toggle-check:checked ~ #nav-toggle-button{color:#fefefe}#nav-toggle-check:checked ~ #nav-content{-moz-transition:all 300ms;-o-transition:all 300ms;-webkit-transition:all 300ms;transition:all 300ms;max-height:12.63158rem}#nav-toggle-button{float:right;font-size:25px;line-height:2.36842rem;height:2.36842rem}@media (min-width: 45em){#nav-toggle-button{display:none}}#nav-toggle-button:hover{color:#fefefe;cursor:pointer}#nav-content{clear:both;max-height:0}@media (min-width: 30em) and (max-width: 45em){#nav-content{text-align:center}}@media (min-width: 45em){#nav-content{clear:none;float:right;-moz-transition:all 300ms;-o-transition:all 300ms;-webkit-transition:all 300ms;transition:all 300ms;max-height:12.63158rem}}#nav-links{display:inline}@media (min-width: 30em){#nav-links{line-height:2.36842rem}}#nav-links h2{display:block;margin-top:0;margin-left:0;margin-right:0}@media (min-width: 30em){#nav-links h2{display:inline;margin-top:0;margin-bottom:0;margin-left:0.5rem;margin-right:0.5rem}}.nav-search-form{padding-bottom:.78947rem;position:relative;top:0}@media (min-width: 30em) and (max-width: 45em){.nav-search-form{margin-left:auto;margin-right:auto}}@media (min-width: 45em){.nav-search-form{display:inline-block;margin-left:0.5rem;padding-bottom:0;top:-0.1rem}}.nav-search-box{min-width:128px;height:1.2rem;background-color:#404040;color:#d9d9d9;font-size:15px;padding:0.2rem 0.4rem;border:1px solid #d9d9d9;outline:0px none;border-radius:3px;background-image:url("/img/cse.png");background-size:119px 16px;background-repeat:no-repeat;background-position:left 0.2rem center}@media (min-width: 45em){.nav-search-box{width:128px}}.nav-search-box:hover,.nav-search-box:focus,.nav-search-box:valid{border-color:#fefefe;background-image:none;box-shadow:0px 1px 1px rgba(0,0,0,0.075) inset,0px 0px 8px #fefefe}#top-header{overflow:hidden;*zoom:1;position:fixed;top:0;z-index:9999;width:100%;background:#404040}#top-header h1{font-size:25px}#top-header h2{font-size:19px;font-family:"Open Sans Condensed",sans}#top-header h1 strong{color:#FF7F00;font-family:Alegreya,sans-serif}#top-header a{color:#d9d9d9}#top-header a:hover{color:#fefefe}main{padding-top:3.15789rem;max-width:37.5rem;margin-left:auto;margin-right:auto;padding-left:.78947rem;padding-right:.78947rem}main:after{content:" ";display:block;clear:both}article ul{list-style:disc outside}article ol{list-style-type:decimal}article ul,article ol{margin-left:2.76316rem;margin-right:2.76316rem}article pre{margin-left:1.57895rem;margin-right:1.57895rem}article p{margin-top:1.57895rem}article .time{display:block;font-size:1rem;line-height:1.57895rem;font-family:"Open Sans Condensed",sans;color:#999}article h1{margin-top:1.57895rem;font-size:2.05263rem;line-height:3.15789rem}article h2{margin-top:1.57895rem;font-size:1.57895rem;line-height:1.57895rem;margin-bottom:1.57895rem}article h3{margin-top:1.57895rem;font-size:1.21053rem;line-height:1.57895rem;margin-bottom:1.57895rem}article h4{font-size:1.05263rem;line-height:1.57895rem}article h5{font-size:1.05263rem;line-height:1.57895rem}article h6{font-size:1.05263rem;line-height:1.57895rem}.hyphenate p,.hyphenate ul,.hyphenate ol{-moz-hyphens:auto;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}body.css-hyphens .hyphenate p,body.css-hyphens .hyphenate ul,body.css-hyphens .hyphenate ol{text-align:justify}article.single h1{color:#fff;text-align:center;margin-bottom:1.57895rem}article.frontpage .article-body{margin-left:1.57895rem;margin-right:1.57895rem}article.frontpage h1{position:relative}article.frontpage h1 span.line{position:absolute;display:block;width:100%;margin:0;border:0;border-top:0.056rem solid rgba(38,38,38,0.5);border-bottom:0.056rem solid rgba(217,217,217,0.2)}article.frontpage .time{margin-bottom:1.57895rem}article.list h2{margin-top:1.57895rem;font-size:1.31579rem;line-height:1.57895rem;margin-bottom:0rem}h1.list{margin-top:1.57895rem;font-size:1.73684rem;line-height:1.57895rem;margin-bottom:1.57895rem}p#more{font-family:"Open Sans Condensed",sans;font-size:1.31579rem;line-height:1.57895rem;font-style:italic;margin-top:1.57895rem}#site-footer{margin-top:1.57895rem;margin-bottom:.3125rem;text-align:center;font-size:.89474rem;line-height:1.57895rem}#site-footer hr{border:0;height:1px;background-image:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuMCIgeTE9IjAuNSIgeDI9IjEuMCIgeTI9IjAuNSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzI2MjYyNiIvPjxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjZDlkOWQ5IiBzdG9wLW9wYWNpdHk9IjAuMzgyIi8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMjYyNjI2Ii8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmFkKSIgLz48L3N2Zz4g');background-size:100%;background-image:-webkit-gradient(linear, 0% 50%, 100% 50%, color-stop(0%, #262626),color-stop(50%, rgba(217,217,217,0.382)),color-stop(100%, #262626));background-image:-moz-linear-gradient(left, #262626,rgba(217,217,217,0.382),#262626);background-image:-webkit-linear-gradient(left, #262626,rgba(217,217,217,0.382),#262626);background-image:linear-gradient(to right, #262626,rgba(217,217,217,0.382),#262626)}div.gsc-adBlock,#discovery-top{display:none !important}.cse .gsc-control-cse,.gsc-control-cse{background-color:#262626 !important;border:none !important}.gs-result .gs-title,.gs-result .gs-title *{color:#75A6C4 !important;text-decoration:none !important}.gs-result .gs-title:hover,.gs-result .gs-title *:hover{text-decoration:underline !important}.gsc-preview-reviews,.gsc-control-cse .gs-snippet,.gsc-control-cse .gs-promotion em,.gsc-control-cse .gs-snippet,.gsc-control-cse .gs-promotion em,.gsc-result-info,.gsc-orderby-label{color:#d9d9d9 !important}.gsc-webResult.gsc-result{border:none !important}.gsc-above-wrapper-area{border-bottom:none !important}.gsc-control-cse,.gsc-control-cse *{box-sizing:content-box}.gsc-result .gs-title{height:auto !important}.gsc-selected-option-container{background-color:#262626 !important;background-image:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuNSIgeTE9IjAuMCIgeDI9IjAuNSIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzI2MjYyNiIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzQwNDA0MCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==') !important;background-size:100%;background-image:-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #262626),color-stop(100%, #404040)) !important;background-image:-moz-linear-gradient(top, #262626,#404040) !important;background-image:-webkit-linear-gradient(top, #262626,#404040) !important;background-image:linear-gradient(to bottom, #262626,#404040) !important}.gsc-selected-option-container{color:#d9d9d9 !important}.gsc-control-cse .gsc-option-menu{background:#262626 !important;border:1px solid rgba(38,38,38,0.2);box-shadow:0 2px 4px #262626}.gsc-option-menu-item{color:#d9d9d9 !important}.gsc-option-menu-item-highlighted{background-color:#404040 !important;border-color:#d9d9d9 !important;color:#d9d9d9 !important}.gsc-results .gsc-cursor-box .gsc-cursor-current-page{color:#75A6C4 !important;cursor:pointer !important;background-color:#262626 !important}.gs-result a.gs-visibleUrl,.gs-result .gs-visibleUrl{color:forestgreen !important}.gsc-result-info{padding-top:.78947rem !important;padding-bottom:.78947rem !important}.cse .gsc-control-cse,.gsc-control-cse,.gsc-above-wrapper-area,.gcsc-branding,.gsc-results,.gs-result a.gs-visibleUrl,.gs-result .gs-visibleUrl,.gsc-table-result,.gsc-thumbnail-inside,.gsc-url-top{padding:0 !important}td.gcsc-branding-text div.gcsc-branding-text{margin:0 !important;padding:0 !important}img.gsc-branding-img,img.gsc-branding-img-noclear,img.gcsc-branding-img,img.gcsc-branding-img-noclear{vertical-align:middle !important}.gsc-webResult .gsc-result{background-color:#262626 !important;padding-top:1.57895rem !important;padding-bottom:0 !important}.gsc-results .gsc-cursor-box{margin-top:1.57895rem !important;margin-bottom:1.57895rem !important}.hljs,.hljs-tag,.css .hljs-rules,.css .hljs-value,.css .hljs-function .hljs-preprocessor,.hljs-pragma{color:#d9d9d9}.hljs-strongemphasis,.hljs-strong,.hljs-emphasis{color:#a8a8a2}.hljs-bullet,.hljs-blockquote,.hljs-horizontal_rule,.hljs-number,.hljs-regexp,.alias .hljs-keyword,.hljs-literal,.hljs-hexcolor{color:#ae81ff}.hljs-tag .hljs-value,.hljs-code,.hljs-title,.css .hljs-class,.hljs-class .hljs-title:last-child{color:#a6e22e}.hljs-link_url{font-size:80%}.hljs-strong,.hljs-strongemphasis{font-weight:bold}.hljs-emphasis,.hljs-strongemphasis,.hljs-class .hljs-title:last-child{font-style:italic}.hljs-keyword,.hljs-function,.hljs-change,.hljs-winutils,.hljs-flow,.lisp .hljs-title,.clojure .hljs-built_in,.nginx .hljs-title,.tex .hljs-special,.hljs-header,.hljs-attribute,.hljs-symbol,.hljs-symbol .hljs-string,.hljs-tag .hljs-title,.hljs-value,.alias .hljs-keyword:first-child,.css .hljs-tag,.css .unit,.css .hljs-important{color:#D12060}.hljs-function .hljs-keyword,.hljs-class .hljs-keyword:first-child,.hljs-constant,.css .hljs-attribute{color:#66d9ef}.hljs-variable,.hljs-params,.hljs-class .hljs-title{color:#f8f8f2}.hljs-string,.css .hljs-id,.hljs-subst,.haskell .hljs-type,.ruby .hljs-class .hljs-parent,.hljs-built_in,.django .hljs-template_tag,.django .hljs-variable,.smalltalk .hljs-class,.django .hljs-filter .hljs-argument,.smalltalk .hljs-localvars,.smalltalk .hljs-array,.hljs-attr_selector,.hljs-pseudo,.hljs-addition,.hljs-stream,.hljs-envvar,.apache .hljs-tag,.apache .hljs-cbracket,.tex .hljs-command,.hljs-prompt,.hljs-link_label,.hljs-link_url{color:#e6db74}.hljs-comment,.hljs-javadoc,.java .hljs-annotation,.python .hljs-decorator,.hljs-template_comment,.hljs-pi,.hljs-doctype,.hljs-deletion,.hljs-shebang,.apache .hljs-sqbracket,.tex .hljs-formula{color:#75715e}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata,.xml .php,.php .xml{opacity:0.5}ul#tags{font-family:"Open Sans Condensed",sans;clear:both;list-style:none;line-height:3.15789rem;padding:0}@media (min-width: 45em){ul#tags{clear:none}}ul#tags li{float:left;line-height:1.26316rem;margin-top:.94737rem;margin-left:0.4rem}@media (min-width: 45em){ul#tags li{float:right}}ul#tags li a{font-size:17px;color:#000;background:#75A6C4;border-radius:3px;padding-left:0.2rem;padding-right:0.2rem;padding-bottom:0.1rem;cursor:pointer}ul#tags li a:hover{background:#a9c8da;outline:none}#article-time{float:left;font-family:"Open Sans Condensed",sans;font-size:1.31579rem;line-height:3.15789rem;color:#999}#livefyre-comments{padding-top:3.15789rem;font-family:"Open Sans Condensed",sans}#livefyre-comments p{font-family:Alegreya,sans-serif}#livefyre-comments .fyre .fyre-help{display:none}#livefyre-comments .fyre .fyre-login-bar{font-family:inherit}#livefyre-comments .fyre .fyre-comment-article,#livefyre-comments .fyre .fyre-comment-stream{font-family:inherit;font-size:1rem;line-height:1.57895rem;margin:0}#livefyre-comments .fyre .fyre-comment{margin:0}#livefyre-comments .fyre .fyre-comment p{margin-bottom:1.57895rem;line-height:1.57895rem}#livefyre-comments .fyre .fyre-comment p:last-child{margin-bottom:0}#livefyre-comments .fyre .fyre-comment a.fyre-comment-edit{font-size:17px}#livefyre-comments .fyre .fyre-comment-footer{margin:0;padding:0;line-height:1.57895rem;height:1.57895rem;font-family:"Open Sans Condensed",sans}#livefyre-comments .fyre .fyre-comment-actions{margin-top:0;font-size:17px}#livefyre-comments .fyre .fyre-comment-actions a:hover{text-decoration:none}#livefyre-comments .fyre .fyre-comment-like,#livefyre-comments .fyre .fyre-comment-reply,#livefyre-comments .fyre .fyre-comment-like-count,#livefyre-comments .fyre .fyre-comment-like-btn{font-size:17px}#livefyre-comments .fyre .fyre-stream-stats span{line-height:1.57895rem}#livefyre-comments .fyre .fyre-stream-stats .fyre-comment-count{font-family:inherit;font-weight:normal;font-size:1.31579rem;line-height:1.57895rem}#livefyre-comments .fyre .fyre-livecount{top:auto;position:static}#livefyre-comments .fyre .fyre-auth{margin-top:1.57895rem}#livefyre-comments .fyre .fyre-stream-stats,#livefyre-comments .fyre .fyre-box-wrapper a.fyre-user-profile-link,#livefyre-comments .fyre .fyre-stream-livecount,#livefyre-comments .fyre .fyre-comment-stream,#livefyre-comments .fyre .fyre-comment-actions{color:#d9d9d9}#livefyre-comments .fyre .fyre-box-wrapper:hover{background:none}#livefyre-comments .fyre .fyre-box-list{background:none repeat scroll 0% 0% #262626;color:#d9d9d9}#livefyre-comments .fyre .fyre-box-list li a{color:#d9d9d9}#livefyre-comments .fyre .fyre-box-list li a:hover{color:#262626;background-color:#d9d9d9}#livefyre-comments .fyre .fyre-user-loggedout{color:#d9d9d9}#livefyre-comments .fyre .fyre-user-loggedout,#livefyre-comments .fyre .fyre-stream-sort,#livefyre-comments .fyre .fyre-stream-stats,#livefyre-comments .fyre .fyre-stream-livecount{font-family:inherit;font-size:17px;line-height:1.57895rem}#livefyre-comments .fyre .fyre-moderator{display:none}#livefyre-comments .fyre a{color:#75A6C4}#livefyre-comments .fyre a:hover{color:#a9c8da}#livefyre-comments .fyre .fyre-stream-sort{border:none;margin:0;padding-top:.78947rem;padding-bottom:.78947rem;line-height:1.57895rem}#livefyre-comments .fyre .fyre-comment-article{margin-top:1.57895rem}#livefyre-comments .fyre .fyre-comment-head{position:relative}#livefyre-comments .fyre .fyre-comment-head .fyre-comment-username::before{content:"";position:absolute;width:100%;height:0px;background:none;border:0;border-top:0.056rem solid rgba(38,38,38,0.5);border-bottom:0.056rem solid rgba(217,217,217,0.2)}#livefyre-comments .fyre .fyre-comment-divider{display:none}#livefyre-comments .fyre .fyre-comment-wrapper time.fyre-comment-date{font-size:17px}#livefyre-comments .fyre-editor{margin:0;padding-top:2.36842rem}#livefyre-comments .fyre-editor .fyre-editor-container .fyre-editor-editable{color:#d9d9d9;background-color:transparent;font-family:inherit;font-size:1rem;line-height:1.57895rem;overflow:hidden;padding:.78947rem}#livefyre-comments .fyre-editor .fyre-editor-container .fyre-editor-editable p{line-height:1.5}#livefyre-comments .fyre-editor .fyre-editor-toolbar{height:60px}#livefyre-comments .fyre-editor .fyre-editor-toolbar .goog-toolbar>div{color:#d9d9d9;background-image:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuNSIgeTE9IjAuMCIgeDI9IjAuNSIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzI2MjYyNiIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzNiM2IzYiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');background-size:100%;background-image:-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #262626),color-stop(100%, #3b3b3b));background-image:-moz-linear-gradient(top, #262626,#3b3b3b);background-image:-webkit-linear-gradient(top, #262626,#3b3b3b);background-image:linear-gradient(to bottom, #262626,#3b3b3b)}#livefyre-comments .fyre-editor .fyre-editor-toolbar .goog-toolbar>div.fyre-format-button{display:none}#livefyre-comments .fyre-editor .fyre-editor-toolbar .goog-toolbar>div.fyre-mention-button{border-bottom:1px solid #a1a1a1;border-left:1px solid #a1a1a1;-moz-border-radius:0 0 0 5px;-webkit-border-radius:0;border-radius:0 0 0 5px}#livefyre-comments .fyre-editor .fyre-editor-toolbar .goog-toolbar>div.fyre-mention-button>div{background:url("/img/sprites.png") no-repeat scroll 9px -57px transparent}#livefyre-comments .fyre-editor .fyre-editor-toolbar .goog-toolbar>div.fyre-embed-button>div{background:url("/img/sprites.png") no-repeat scroll 8px -121px transparent}#livefyre-comments .fyre-editor .fyre-editor-toolbar .goog-toolbar>div.fyre-button-left .fyre-button-left-outer-box .fyre-button-left-inner-box{text-shadow:none}#livefyre-comments .fyre-editor .fyre-editor-toolbar .goog-toolbar>div.fyre-button-right.fyre-post-button .fyre-button-right-outer-box .fyre-button-right-inner-box{color:#d9d9d9;text-shadow:none}#livefyre-comments .fyre-editor .fyre-editor-toolbar .fyre-share-container{background-color:#262626}#livefyre-comments .fyre-editor .fyre-editor-toolbar .fyre-share-container span>a{color:#d9d9d9}#livefyre-comments .fyre-editor .fyre-editor-toolbar .fyre-share-container span>a:hover{color:#262626;background-color:#d9d9d9}#livefyre-comments .fyre-editor .fyre-editor-toolbar .fyre-format-toolbar{background-color:#262626}#livefyre-comments .fyre-editor .fyre-editor-toolbar .fyre-mention-menu{background-color:#262626}#livefyre-comments .fyre-editor .fyre-editor-toolbar .fyre-mention-menu .fyre-mention-item{height:auto}.my-name{font-family:Constantia,"Lucida Bright",Lucidabright,"Lucida Serif",Lucida,"DejaVu Serif","Bitstream Vera Serif","Liberation Serif",Georgia,serif;font-size:90%}#github-ribbon{position:fixed;width:200px;top:2.36842rem;margin-top:34px;right:-50px;-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg);background-color:#FF7F00;background-image:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuNSIgeTE9IjAuMCIgeDI9IjAuNSIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjAiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4xNSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');background-size:100%;background-image:-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, rgba(0,0,0,0)),color-stop(100%, rgba(0,0,0,0.15)));background-image:-moz-linear-gradient(top, rgba(0,0,0,0),rgba(0,0,0,0.15));background-image:-webkit-linear-gradient(top, rgba(0,0,0,0),rgba(0,0,0,0.15));background-image:linear-gradient(to bottom, rgba(0,0,0,0),rgba(0,0,0,0.15));font-family:HelveticaNeue,"Helvetica Neue",HelveticaNeueRoman,HelveticaNeue-Roman,"Helvetica Neue Roman",TeXGyreHerosRegular,Helvetica,Tahoma,Geneva,Arial,sans-serif;font-weight:bold;font-size:15px;padding:2px 0;z-index:10;pointer-events:auto}#github-ribbon a,#github-ribbon a:hover{color:#404040;text-decoration:none;display:inline-block;text-align:center;width:200px;border-width:1px 0;border-style:dashed;border-color:#404040}.pagination{font-family:"Open Sans Condensed",sans;font-weight:bold;margin-top:3rem;text-align:center}.pagination li{display:inline;margin-left:0.5rem;margin-right:0.5rem}.pagination .disabled{color:#999}

        </style>

        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/highlight.min.js"></script>
<script>
    hljs.configure({languages: []}); 
    hljs.initHighlightingOnLoad();
</script>


        <script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$','$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true
    },
    options: {
      enableMenu: false,
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
  };
</script>
<script src="//polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript" id="MathJax-script" async src="//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>


    </head>
    <body>
        <header id="top-header">
            <div class="container">
                <h1 id="logo">
                    
                    <a rel="home" id="site-title" href="/"><strong>h12</strong></a>
                    <a href="https://stand-with-ukraine.pp.ua"><img src="https://raw.githubusercontent.com/vshymanskyy/StandWithUkraine/main/badges/StandWithUkraine.svg" alt="Stand With Ukraine"></a>
                </h1>
                <nav>
                    <input type="checkbox" id="nav-toggle-check">
                    <label id="nav-toggle-button" for="nav-toggle-check" class="icon-menu"></label>
                    <div id="nav-content">
                        <div id="nav-links">
                            <h2><a href="/article" data-nav="Article">
                                <i class="icon-article"></i><span>Article</span>
                            </a></h2>
                            <h2><a href="/project" data-nav="Project">
                                <i class="icon-project"></i><span>Project</span>
                            </a></h2>
                            <h2><a href="/note" data-nav="Note">
                                <i class="icon-note"></i><span>Note</span>
                            </a></h2>
                            
                            <h2><a href="/about" data-nav="About">
                                <i class="icon-about"></i><span>About</span>
                            </a></h2>
                        </div>
                        <form class="nav-search-form" action="/search">
                            <input type="text" class="nav-search-box" name="q" required="required"/>
                        </form>
                    </div>
                </nav>
            </div>
        </header>


        <main class="container">
        
        
            <article class="frontpage">
                <h1>
                    <a href="http://h12.io/note/htc-upgrade/">Upgrading 4.4.3 ROM for HTC One</a>
                    <span class="line"></span>
                </h1>
                <span class="time">11 June 2014</span>
                <div class="article-body hyphenate">
                    <p><a href="http://htc-one.wonderhowto.com/how-to/update-your-rooted-google-play-edition-htc-one-4-4-3-without-losing-any-data-0155404/">Upgrade your rooted Google Play Edition</a></p>

                </div>
            </article>
        
            <article class="frontpage">
                <h1>
                    <a href="http://h12.io/note/disable-touchpad/">How to Disable the Touchpad in Linux?</a>
                    <span class="line"></span>
                </h1>
                <span class="time">10 June 2014</span>
                <div class="article-body hyphenate">
                    <p>Have you ever been annoyed by accidentally touching the touchpad on your laptop
when you are typing?</p>

<p>I am using a Linux laptop with both trackpoint and touchpad so the touchpad is
just an annoying redundant thing. Here is the one-liner to disable it:</p>

<pre><code class="language-bash">xinput list | grep TouchPad | grep -Po 'id=\K([0-9]+)' | xargs xinput disable
</code></pre>

                </div>
            </article>
        
            <article class="frontpage">
                <h1>
                    <a href="http://h12.io/project/gosweep/">gosweep: A shell script to do various checks on Go code</a>
                    <span class="line"></span>
                </h1>
                <span class="time">5 June 2014</span>
                <div class="article-body hyphenate">
                    

<p>This script performs the build, test and automatic checking of a Go package and its sub-packages using:</p>

<ol>
<li><a href="http://golang.org/cmd/gofmt/" title="gofmt">gofmt</a></li>
<li><a href="https://godoc.org/golang.org/x/tools/cmd/goimports" title="golang.org/x/tools/cmd/goimports">goimports</a></li>
<li><a href="https://github.com/golang/lint" title="golang/lint">golint</a></li>
<li><a href="http://golang.org/cmd/vet" title="go vet">go vet</a></li>
<li><a href="https://github.com/gordonklaus/ineffassign" title="ineffassign">ineffassign</a></li>
<li><a href="http://blog.golang.org/race-detector" title="race detector">race detector</a></li>
<li><a href="http://blog.golang.org/cover" title="test coverage">test coverage</a> on package and its sub-packages, <code>/vendor</code> directories excluded</li>
<li><a href="https://github.com/mattn/goveralls" title="mattn/goveralls">goveralls</a></li>
<li><a href="https://github.com/fzipp/gocyclo" title="gocyclo">gocyclo</a></li>
<li><a href="https://github.com/client9/misspell" title="misspell">misspell</a></li>
</ol>

<p>Migrated from my <a href="https://gist.github.com/h12w/0f22736320abe6be71ce">Gist</a>.</p>

<h2 id="dependencies">Dependencies</h2>

<p>To setup all the dependencies need to run the script do:</p>

<pre><code>$ go get -v github.com/client9/misspell/cmd/misspell
$ go get -v github.com/fzipp/gocyclo
$ go get -v github.com/golang/lint/golint
$ go get -v github.com/gordonklaus/ineffassign
$ go get -v github.com/h12w/gosweep
$ go get -v github.com/mattn/goveralls
$ go get -v golang.org/x/tools/cmd/goimports
</code></pre>

<h2 id="environment-variables">Environment variables</h2>

<ul>
<li><strong>GOCYCLO_COMPLEXITY</strong>: maximum allowed function complexity threshold (default: <code>5</code>).</li>
<li><strong>MISSPELL_LOCALE</strong>: English locale (default: <code>US</code>).</li>
</ul>

<p>If you wish to set this for a project you can create a <code>.gosweep</code> file.
For example:</p>

<pre><code class="language-bash">$ cat .gosweep
GOCYCLO_COMPLEXITY=5
MISSPELL_LOCALE='US'
</code></pre>

<h2 id="continuous-integration">Continuous Integration</h2>

<h3 id="travis-ci">travis-ci</h3>

<p>Example of <code>.travis.yml</code> file for Go:</p>

<pre><code class="language-yaml">language: go
cache:
  directories:
    - ${GOPATH}/src/github.com/${TRAVIS_REPO_SLUG}/vendor
    - ${GOPATH}/src/github.com/fzipp
    - ${GOPATH}/src/github.com/golang
    - ${GOPATH}/src/github.com/gordonklaus
    - ${GOPATH}/src/github.com/h12w
    - ${GOPATH}/src/github.com/mattn
go:
  - tip
  - 1.8
  - 1.7
  - 1.6
sudo: false

env:
    CI_SERVICE=travis-ci

install:
  - go get -v github.com/client9/misspell/cmd/misspell
  - go get -v github.com/fzipp/gocyclo
  - go get -v github.com/golang/lint/golint
  - go get -v github.com/gordonklaus/ineffassign
  - go get -v github.com/h12w/gosweep
  - go get -v github.com/mattn/goveralls
  - go get -v -u golang.org/x/tools/cmd/goimports

script:
  - bash ${GOPATH}/src/github.com/h12w/gosweep/gosweep.sh
</code></pre>

                </div>
            </article>
        
            <article class="frontpage">
                <h1>
                    <a href="http://h12.io/project/getgo/">Getgo: a concurrent, simple and extensible web scraping framework</a>
                    <span class="line"></span>
                </h1>
                <span class="time">2 June 2014</span>
                <div class="article-body hyphenate">
                    

<p><a href="https://godoc.org/github.com/h12w/getgo"><img src="https://godoc.org/github.com/h12w/getgo?status.png" alt="GoDoc" /></a>
<a href="https://travis-ci.org/h12w/getgo"><img src="https://travis-ci.org/h12w/getgo.svg?branch=master" alt="Build Status" /></a></p>

<p>Getgo is a concurrent, simple and extensible web scraping framework written in <a href="http://golang.org">Go</a>.</p>

<h2 id="quick-start">Quick start</h2>

<h3 id="get-getgo">Get Getgo</h3>

<pre><code class="language-bash">go get -u github.com/h12w/getgo
</code></pre>

<h3 id="define-a-task">Define a task</h3>

<p>This example is under the examples/goblog directory. To use Getgo to scrap structured
data from a web page, just define the structured data as a Go struct (golangBlogEntry),
and define a corresponding task (golangBlogIndexTask).</p>

<pre><code class="language-go">type golangBlogEntry struct {
	Title string
	URL   string
	Tags  *string
}

type golangBlogIndexTask struct {
	// Variables in task URL, e.g. page number
}

func (t golangBlogIndexTask) Request() *http.Request {
	return getReq(`http://blog.golang.org/index`)
}

func (t golangBlogIndexTask) Handle(root *query.Node, s getgo.Storer) (err error) {
	root.Div(_Id(&quot;content&quot;)).Children(_Class(&quot;blogtitle&quot;)).For(func(item *query.Node) {
		title := item.Ahref().Text()
		url := item.Ahref().Href()
		tags := item.Span(_Class(&quot;tags&quot;)).Text()
		if url != nil &amp;&amp; title != nil {
			store(&amp;golangBlogEntry{Title: *title, URL: *url, Tags: tags}, s, &amp;err)
		}
	})
	return
}
</code></pre>

<h3 id="run-the-task">Run the task</h3>

<p>Use util.Run to run the task and print all the result to standard output.</p>

<pre><code class="language-go">	util.Run(golangBlogIndexTask{})
</code></pre>

<p>To store the parsed result to a database, a storage backend satisfying getgo.Tx
interface should be provided to the getgo.Run method.</p>

<h2 id="understand-getgo">Understand Getgo</h2>

<p>A getgo.Task is an interface to represent an HTTP crawler task that provides an
HTTP request and a method to handle the HTTP response.</p>

<pre><code class="language-go">type Task interface {
	Requester
	Handle(resp *http.Response) error
}

type Requester interface {
	Request() *http.Request
}
</code></pre>

<p>A getgo.Runner is responsible to run a getgo.Task. There are two concrete runners
provided: SequentialRunner and ConcurrentRunner.</p>

<pre><code class="language-go">type Runner interface {
	Run(task Task) error // Run runs a task
	Close()              // Close closes the runner
}
</code></pre>

<p>A task that stores data into a storage backend should satisfy getgo.StorableTask
interface.</p>

<pre><code class="language-go">type StorableTask interface {
	Requester
	Handle(resp *http.Response, s Storer) error
}
</code></pre>

<p>A storage backend is simply an object satisfying getgo.Tx interface.</p>

<pre><code class="language-go">type Storer interface {
	Store(v interface{}) error
}

type Tx interface {
	Storer
	Commit() error
	Rollback() error
}
</code></pre>

<p>See getgo.Run method to understand how a StorableTask is combined with a storage
backend and adapted to become a normal Task to allow a Runner to run it.</p>

<p>There are currently a PostgreSQL storage backend provided by Getgo, and it is
not hard to support more backends (See getgo/db package for details).</p>

<p>The easier way to define a task for an HTML page is to define a task satisfying
getgo.HTMLTask rather than getgo.Task, there are adapters to convert internally
an HTMLTask to a Task so that a Runner can run an HTMLTask. The Handle method of
HTMLTask provides an already parsed HTML DOM object (by html-query package).</p>

<pre><code class="language-go">type HTMLTask interface {
	Requester
	Handle(root *query.Node, s Storer) error
}
</code></pre>

<p>Similarly, a task for retrieving a JSON page should satisfy getgo.TextTask
interface. An io.Reader is provided to be decoded by the encoding/json package.</p>

<pre><code class="language-go">type TextTask interface {
	Requester
	Handle(r io.Reader, s Storer) error
}
</code></pre>

                </div>
            </article>
        
            <article class="frontpage">
                <h1>
                    <a href="http://h12.io/project/gspec/">GSpec: a productive Go test framework</a>
                    <span class="line"></span>
                </h1>
                <span class="time">28 May 2014</span>
                <div class="article-body hyphenate">
                    <p><a href="https://app.wercker.com/project/bykey/d5ed30f0d03d4a5210f65659ead13888"><img src="https://app.wercker.com/status/d5ed30f0d03d4a5210f65659ead13888/s" alt="wercker status" title="wercker status" /></a>
<a href="https://godoc.org/h12.io/gspec"><img src="https://godoc.org/h12.io/gspec?status.png" alt="GoDoc" /></a></p>

<p>GSpec is an <em>expressive, reliable, concurrent and extensible</em> Go test framework
that makes it productive to organize and verify the mind model of software.</p>

<ul>
<li><em>Expressive</em>: a complete runnable specification can be organized via both BDD
            and table driven styles.</li>
<li><em>Reliable</em>:   the implementation has minimal footprint and is tested with 100%
            coverage.</li>
<li><em>Concurrent</em>: test cases can be executed concurrently or sequentially.</li>
<li><em>Extensible</em>: customizable BDD cue words, expectations and test reporters.</li>
<li><em>Compatible</em>: &ldquo;go test&rdquo; is sufficient but not mandatory to run GSpec tests.</li>
</ul>

<h2 id="quick-start">Quick start</h2>

<h3 id="get-gspec">Get GSpec</h3>

<pre><code class="language-bash">go get -u -f h12.io/gspec
go test h12.io/gspec/...
</code></pre>

<h3 id="write-tests-with-gspec">Write tests with GSpec</h3>

<p>According to the <a href="http://golang.org/doc/code.html#Testing">convention of Go</a>,
write GSpec tests in file xxx_test.go to test code in xxx.go.</p>

<pre><code class="language-go">import (
	&quot;fmt&quot;

	&quot;h12.io/gspec&quot;
)

// Only one suite.Add is needed for each xxx_test.go file.
var _ = gspec.Add(func(s gspec.S) {
	// BDD cue word is customizible.
	describe, given, when, it := s.Alias(&quot;describe&quot;), s.Alias(&quot;given&quot;), s.Alias(&quot;when&quot;), s.Alias(&quot;it&quot;)
	// expectation cue word is customizible too.
	expect := gspec.Alias(s.FailNow)

	// A BDD example.
	describe(&quot;an integer i&quot;, func() {
		// setup
		i := 2
		defer func() {
			// teardown (if any)
		}()
		given(&quot;another integer j&quot;, func() {
			j := 3
			when(&quot;j is added to i&quot;, func() {
				i += j
				it(&quot;should become the sum of original i and j&quot;, func() {
					expect(i).Equal(5) // a passing case
				})
			})
			when(&quot;j is minused from i&quot;, func() {
				i -= j
				it(&quot;should become the difference of j minus i&quot;, func() {
					expect(i).Equal(4) // a failing case
				})
			})
			when(&quot;j is multiplied to i&quot;, nil) // a pending case
		})
	})

	// A table-driven example.
	testcase := s.Alias(&quot;testcase&quot;)
	describe(&quot;integer summation&quot;, func() {
		for _, c := range []struct{ i, j, sum int }{
			{1, 2, 3}, // a passing case
			{1, 1, 0}, // a failing case
		} {
			testcase(fmt.Sprintf(`%d + %d = %d`, c.i, c.j, c.sum), func() {
				expect(c.i + c.j).Equal(c.sum)
			})
		}
	})
})
</code></pre>

<p>Write the following go test function for only once in any test file within the
package (e.g. all_test.go).</p>

<pre><code class="language-go">import (
	&quot;testing&quot;
	&quot;h12.io/gspec&quot;
)

// Defined only once within a package.
func TestAll(t *testing.T) {
	gspec.Test(t)
}
</code></pre>

<h3 id="run-tests-with-go-test">Run tests with &ldquo;go test&rdquo;</h3>

<p>Run all the tests concurrently (sequencially by default) and display errors.</p>

<pre><code class="language-bash">go test -concurrent
</code></pre>

<p>Run all the tests and view the complete specification.</p>

<pre><code class="language-bash">go test -v
</code></pre>

<p>Run only a failing test case (even it is an entry in the driven table):</p>

<pre><code class="language-bash">go test -focus 1/1
</code></pre>
                </div>
            </article>
        
            <article class="frontpage">
                <h1>
                    <a href="http://h12.io/project/html-query/">html-query: a fluent and functional approach to querying HTML DOM</a>
                    <span class="line"></span>
                </h1>
                <span class="time">20 January 2014</span>
                <div class="article-body hyphenate">
                    

<p>html-query is a Go package that provides a fluent and functional interface for
querying HTML DOM. It is based on <a href="http://code.google.com/p/go.net/html">go.net/html</a>.</p>

<h2 id="examples">Examples</h2>

<ol>
<li><p>A simple example (under &ldquo;examples&rdquo; directory)</p>

<pre><code class="language-go">r := get(`http://blog.golang.org/index`)
defer r.Close()
root, err := query.Parse(r)
checkError(err)
root.Div(Id(&quot;content&quot;)).Children(Class(&quot;blogtitle&quot;)).For(func(item *query.Node) {
    href := item.Ahref().Href()
    date := item.Span(Class(&quot;date&quot;)).Text()
    tags := item.Span(Class(&quot;tags&quot;)).Text()
    // ......
})
</code></pre></li>

<li><p>Generator of html-query (under &ldquo;gen&rdquo; directory)</p></li>
</ol>

<p>A large part of html-query is automatically generated from HTML spec. The
spec is in HTML format, so the generator parses it using html-query itself.</p>

<h2 id="design">Design</h2>

<p>Here is a simple explanation of the design of html-query.</p>

<h3 id="functional-query-expressions">Functional query expressions</h3>

<p>All functional definitions are defined in html-query/expr package.</p>

<ol>
<li><p>Checker and checker composition<br />
A checker is a function that accept and conditionally returns a *html.Node.</p>

<pre><code class="language-go">type Checker func(*html.Node) *html.Node
</code></pre>

<p>Here are some checker examples:</p>

<pre><code>Id(&quot;id1&quot;)
Class(&quot;c1&quot;)
Div
Abbr
H1
H2
</code></pre>

<p>Checkers can be combined as boolean expressions:</p>

<pre><code class="language-go">And(Id(&quot;id1&quot;), Class(&quot;c1&quot;))
Or(Class(&quot;c1&quot;), Class(&quot;c2&quot;))
And(Class(&quot;c1&quot;), Not(Class(&quot;c2&quot;)))
</code></pre></li>

<li><p>Checker builder<br />
A checker builder is a function that returns a checker. &ldquo;Id&rdquo;, &ldquo;Class&rdquo;, &ldquo;And&rdquo;,
&ldquo;Or&rdquo;, &ldquo;Not&rdquo; shown above are all checker builders. There are also some checker
builder builder (function that returns a checker builder) defined in
html-query when needed.</p></li>
</ol>

<h3 id="fluent-interface">Fluent interface</h3>

<p>Fluent interface (<a href="http://en.wikipedia.org/wiki/Fluent_interface">http://en.wikipedia.org/wiki/Fluent_interface</a>) are defined in
html-query package.</p>

<ol>
<li><p>Root node<br />
Function Parse returns the root node of an html document.</p></li>

<li><p>Node finder<br />
Method Node.Find implements a BFS search for a node, e.g.</p>

<pre><code class="language-go">node.Find(Div, Class(&quot;id1&quot;))
</code></pre>

<p>But usually you can write the short form:</p>

<pre><code class="language-go">node.Div(Class(&quot;id1&quot;))
</code></pre></li>

<li><p>Attribute getter
Method Node.Attr can be used to get the value (or a regular expression
submatch of the value) of a node, e.g.</p>

<pre><code class="language-go">node.Attr(&quot;Id&quot;)
node.Attr(&quot;href&quot;, &quot;\(.*)&quot;)
</code></pre>

<p>But usually you can write the short form:</p>

<pre><code class="language-go">node.Id()
node.Href(&quot;\(.*)&quot;)
</code></pre></li>

<li><p>Node iterator<br />
Method Node.Children and Node.Descendants each returns a node iterator
(NodeIter). Method NodeIter.For can be used to loop through these nodes.</p></li>
</ol>

<h2 id="alternative">Alternative</h2>

<p>If you prefer a jquery like DSL rather than functional way, you might want to
try <a href="https://github.com/PuerkitoBio/goquery">goquery</a>.</p>

                </div>
            </article>
        
            <article class="frontpage">
                <h1>
                    <a href="http://h12.io/project/cwrap/">Cwrap: wraps C libraries in Go</a>
                    <span class="line"></span>
                </h1>
                <span class="time">1 January 2014</span>
                <div class="article-body hyphenate">
                    

<p>Cwrap is a Go wrapper generator for C libraries.</p>

<h2 id="features">Features</h2>

<ul>
<li>No Cgo types exposed out of the wrapper package, and uses as less allocation/copy as possible.</li>
<li>C name prefix mapped to Go packages, and a wrapper package can import another wrapper package.</li>
<li>Follows Go naming conventions.</li>
<li>C union.</li>
<li>Use Go language features when possible:

<ul>
<li>string and bool.</li>
<li>Multiple return values.</li>
<li>Slice, slice of slice and slice of string.</li>
<li>struct with methods.</li>
<li>Go closures as callbacks.</li>
</ul></li>
<li>Stay out of the way when you need to do it manually for specified declarations.</li>
</ul>

<h2 id="usage">Usage</h2>

<p>Cwrap itself is a Go package rather than an executable program. Just fill a cwrap.Package struct literal and call its Wrap method to generate your wrapper package under $GOPATH. Here is a simple example:</p>

<p>Say you want to generate a wrapper package for SDL2, and its header is at</p>

<pre><code>/usr/local/include/SDL2/SDL2.h
</code></pre>

<p>So the cwrap.Package literal looks like:</p>

<pre><code class="language-go">var sdl = &amp;Package{
	PacName: &quot;sdl&quot;,
	PacPath: &quot;go-sdl&quot;,
	From: Header{
		Dir:           &quot;/usr/local/include/&quot;,
		File:          &quot;SDL2/SDL.h&quot;,
		OtherCode:     &quot;#define _SDL_main_h&quot;,
		NamePattern:   `\ASDL(.*)`,
		Excluded:      []string{},
		CgoDirectives: []string{&quot;pkg-config: sdl2&quot;},
		BoolTypes:     []string{&quot;SDL_bool&quot;},
	},
	Included: []*Package{},
}
</code></pre>

<p>Then just call</p>

<pre><code class="language-go">err := sdl.Wrap()
</code></pre>

<h2 id="examples">Examples</h2>

<p>In the examples directory, there are C libraries that I have successfully applied Cwrap, including:</p>

<ul>
<li>Cairo</li>
<li>GSL (GNU Scientific Library)</li>
<li>MuPDF</li>
<li>PLplot</li>
<li>SDL2 (Simple DirectMedia Layer)</li>
</ul>

<p>You are very welcome to submit examples you think useful to others.</p>

<h2 id="applications">Applications</h2>

<ul>
<li>gr: A minimal PDF viewer based on SDL2 and MuPDF (<a href="https://github.com/h12w/gr">https://github.com/h12w/gr</a>)</li>
</ul>

<h2 id="issue-report">Issue Report</h2>

<p>Cwrap may not cover every possible case and fails to come up with a corrresonding Go type or convertion, then the generated code may not be able to compile. When this happens, do the following steps:</p>

<ol>
<li>Comment out the failed function wrappers till it compiles.</li>
<li>Add the C names of these failed functions to the excluded list (Package.From.Excluded).</li>
<li>Submit the generator example to me. I cannot guarantee anything but I will try to fix critical issues.</li>
</ol>

<h2 id="limitations">Limitations</h2>

<ul>
<li>C variadic functions (&hellip;) are not supported.</li>
</ul>

<h2 id="acknowledgement">Acknowledgement</h2>

<p>Cwrap uses gccxml (<a href="http://gccxml.github.io">http://gccxml.github.io</a>) to parse C headers to an XML file. Thanks very much for their excellent work.</p>

                </div>
            </article>
        
        <nav class="pagination">
            <span>- 11 -</span>
            <ul>
                <li>
            
                    <a href="/page/10">« Prev</a>
            
                </li>
                <li>
            
                    <a href="/page/12">Next »</a>
            
                </li>
            </ul>
        </nav>
        </main>
        <footer id="site-footer">
            <hr>
            <p>&copy; 2012-22 <span class="my-name">Hǎi-Liàng "Hal" Wáng</span>.<br>
            The content of this page is licensed under <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>, and code is licensed under a <a rel="license" href="/bsd">BSD license</a>.
            </p>
        </footer>

    </body>
</html>
