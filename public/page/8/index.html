<!DOCTYPE html>
<html lang="en">
    <head>
	<meta name="generator" content="Hugo 0.53" />
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title> Hai-Liang &#34;Hal&#34; Wang </title>
        <link rel="shortcut icon" href="/img/favicon.png" />

        <style>
            html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}html{line-height:1}ol,ul{list-style:none}table{border-collapse:collapse;border-spacing:0}caption,th,td{text-align:left;font-weight:normal;vertical-align:middle}q,blockquote{quotes:none}q:before,q:after,blockquote:before,blockquote:after{content:"";content:none}a img{border:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}@font-face{font-family:'Alegreya';font-style:normal;font-weight:400;src:url("/font/Alegreya400normal.ttf") format("truetype"),url("/font/Alegreya400normal.woff") format("woff"),url("/font/Alegreya400normal.eot") format("embedded-opentype")}@font-face{font-family:'Alegreya';font-style:italic;font-weight:400;src:url("/font/Alegreya400italic.ttf") format("truetype"),url("/font/Alegreya400italic.woff") format("woff"),url("/font/Alegreya400italic.eot") format("embedded-opentype")}@font-face{font-family:'Alegreya';font-style:normal;font-weight:700;src:url("/font/Alegreya700normal.ttf") format("truetype"),url("/font/Alegreya700normal.woff") format("woff"),url("/font/Alegreya700normal.eot") format("embedded-opentype")}@font-face{font-family:'Open Sans Condensed';font-style:normal;font-weight:300;src:url("/font/OpenSansCondensed300normal.ttf") format("truetype"),url("/font/OpenSansCondensed300normal.woff") format("woff"),url("/font/OpenSansCondensed300normal.eot") format("embedded-opentype")}@font-face{font-family:'Open Sans Condensed';font-style:italic;font-weight:300;src:url("/font/OpenSansCondensed300italic.ttf") format("truetype"),url("/font/OpenSansCondensed300italic.woff") format("woff"),url("/font/OpenSansCondensed300italic.eot") format("embedded-opentype")}html{font-size:118.75%;line-height:1.57895em}*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}html{font-family:Alegreya,sans-serif;background:#262626;color:#d9d9d9;-webkit-transform:translate3d(0, 0, 0)}.container{max-width:37.5rem;margin-left:auto;margin-right:auto}.container:after{content:" ";display:block;clear:both}h1,h2,h3,h4,h5,h6{font-family:"Open Sans Condensed",sans}a{text-decoration:none}a{color:#75A6C4}a:hover{color:#a9c8da;text-decoration:none}em{font-style:italic}strong{color:#fff}code{font-family:Menlo,Consolas,"Ubuntu Mono",monospace,sans;background-color:#1a1a1a;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px;font-size:.89474rem;line-height:1.57895rem;white-space:pre}p code,li code{padding:0.15rem}pre code{word-wrap:break-word;white-space:pre-wrap;padding-left:0.5rem;padding-right:0.5rem;display:block}code.mathjax{-webkit-font-smoothing:antialiased;background:inherit !important;border:none !important;font-size:100%}table{font-family:Menlo,Consolas,"Ubuntu Mono",monospace,sans;border:1px solid #8c8c8c;margin-left:auto;margin-right:auto}thead,tfoot{border:1px solid #8c8c8c}th,td{padding:0.1rem 0.5rem;text-align:center;background-color:#1a1a1a}#logo{float:left;padding-left:.78947rem;line-height:2.36842rem;height:2.36842rem}@font-face{font-family:'icon';src:url("../font/icon.eot?15086725");src:url("../font/icon.eot?15086725#iefix") format("embedded-opentype"),url("../font/icon.woff2?15086725") format("woff2"),url("../font/icon.woff?15086725") format("woff"),url("../font/icon.ttf?15086725") format("truetype"),url("../font/icon.svg?15086725#icon") format("svg");font-weight:normal;font-style:normal}[class^="icon-"]:before,[class*=" icon-"]:before{font-family:"icon";font-style:normal;font-weight:normal;speak:none;display:inline-block;text-decoration:inherit;width:1em;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-article:before{content:'󰀀'}.icon-project:before{content:'󰀁'}.icon-note:before{content:'󰀂'}.icon-slide:before{content:'󰀃'}.icon-about:before{content:'󰀄'}.icon-menu:before{content:'󰀅'}nav{padding-left:.78947rem;padding-right:.78947rem;padding-top:0;padding-bottom:0}#nav-toggle-check{display:none}#nav-toggle-check:checked ~ #nav-toggle-button{color:#fefefe}#nav-toggle-check:checked ~ #nav-content{-moz-transition:all 300ms;-o-transition:all 300ms;-webkit-transition:all 300ms;transition:all 300ms;max-height:12.63158rem}#nav-toggle-button{float:right;font-size:25px;line-height:2.36842rem;height:2.36842rem}@media (min-width: 45em){#nav-toggle-button{display:none}}#nav-toggle-button:hover{color:#fefefe;cursor:pointer}#nav-content{clear:both;max-height:0}@media (min-width: 30em) and (max-width: 45em){#nav-content{text-align:center}}@media (min-width: 45em){#nav-content{clear:none;float:right;-moz-transition:all 300ms;-o-transition:all 300ms;-webkit-transition:all 300ms;transition:all 300ms;max-height:12.63158rem}}#nav-links{display:inline}@media (min-width: 30em){#nav-links{line-height:2.36842rem}}#nav-links h2{display:block;margin-top:0;margin-left:0;margin-right:0}@media (min-width: 30em){#nav-links h2{display:inline;margin-top:0;margin-bottom:0;margin-left:0.5rem;margin-right:0.5rem}}.nav-search-form{padding-bottom:.78947rem;position:relative;top:0}@media (min-width: 30em) and (max-width: 45em){.nav-search-form{margin-left:auto;margin-right:auto}}@media (min-width: 45em){.nav-search-form{display:inline-block;margin-left:0.5rem;padding-bottom:0;top:-0.1rem}}.nav-search-box{min-width:128px;height:1.2rem;background-color:#404040;color:#d9d9d9;font-size:15px;padding:0.2rem 0.4rem;border:1px solid #d9d9d9;outline:0px none;border-radius:3px;background-image:url("/img/cse.png");background-size:119px 16px;background-repeat:no-repeat;background-position:left 0.2rem center}@media (min-width: 45em){.nav-search-box{width:128px}}.nav-search-box:hover,.nav-search-box:focus,.nav-search-box:valid{border-color:#fefefe;background-image:none;box-shadow:0px 1px 1px rgba(0,0,0,0.075) inset,0px 0px 8px #fefefe}#top-header{overflow:hidden;*zoom:1;position:fixed;top:0;z-index:9999;width:100%;background:#404040}#top-header h1{font-size:25px}#top-header h2{font-size:19px;font-family:"Open Sans Condensed",sans}#top-header h1 strong{color:#FF7F00;font-family:Alegreya,sans-serif}#top-header a{color:#d9d9d9}#top-header a:hover{color:#fefefe}main{padding-top:3.15789rem;max-width:37.5rem;margin-left:auto;margin-right:auto;padding-left:.78947rem;padding-right:.78947rem}main:after{content:" ";display:block;clear:both}article ul{list-style:disc outside}article ol{list-style-type:decimal}article ul,article ol{margin-left:2.76316rem;margin-right:2.76316rem}article pre{margin-left:1.57895rem;margin-right:1.57895rem}article p{margin-top:1.57895rem}article .time{display:block;font-size:1rem;line-height:1.57895rem;font-family:"Open Sans Condensed",sans;color:#999}article h1{margin-top:1.57895rem;font-size:2.05263rem;line-height:3.15789rem}article h2{margin-top:1.57895rem;font-size:1.57895rem;line-height:1.57895rem;margin-bottom:1.57895rem}article h3{margin-top:1.57895rem;font-size:1.21053rem;line-height:1.57895rem;margin-bottom:1.57895rem}article h4{font-size:1.05263rem;line-height:1.57895rem}article h5{font-size:1.05263rem;line-height:1.57895rem}article h6{font-size:1.05263rem;line-height:1.57895rem}.hyphenate p,.hyphenate ul,.hyphenate ol{-moz-hyphens:auto;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}body.css-hyphens .hyphenate p,body.css-hyphens .hyphenate ul,body.css-hyphens .hyphenate ol{text-align:justify}article.single h1{color:#fff;text-align:center;margin-bottom:1.57895rem}article.frontpage .article-body{margin-left:1.57895rem;margin-right:1.57895rem}article.frontpage h1{position:relative}article.frontpage h1 span.line{position:absolute;display:block;width:100%;margin:0;border:0;border-top:0.056rem solid rgba(38,38,38,0.5);border-bottom:0.056rem solid rgba(217,217,217,0.2)}article.frontpage .time{margin-bottom:1.57895rem}article.list h2{margin-top:1.57895rem;font-size:1.31579rem;line-height:1.57895rem;margin-bottom:0rem}h1.list{margin-top:1.57895rem;font-size:1.73684rem;line-height:1.57895rem;margin-bottom:1.57895rem}p#more{font-family:"Open Sans Condensed",sans;font-size:1.31579rem;line-height:1.57895rem;font-style:italic;margin-top:1.57895rem}#site-footer{margin-top:1.57895rem;margin-bottom:.3125rem;text-align:center;font-size:.89474rem;line-height:1.57895rem}#site-footer hr{border:0;height:1px;background-image:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuMCIgeTE9IjAuNSIgeDI9IjEuMCIgeTI9IjAuNSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzI2MjYyNiIvPjxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjZDlkOWQ5IiBzdG9wLW9wYWNpdHk9IjAuMzgyIi8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMjYyNjI2Ii8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmFkKSIgLz48L3N2Zz4g');background-size:100%;background-image:-webkit-gradient(linear, 0% 50%, 100% 50%, color-stop(0%, #262626),color-stop(50%, rgba(217,217,217,0.382)),color-stop(100%, #262626));background-image:-moz-linear-gradient(left, #262626,rgba(217,217,217,0.382),#262626);background-image:-webkit-linear-gradient(left, #262626,rgba(217,217,217,0.382),#262626);background-image:linear-gradient(to right, #262626,rgba(217,217,217,0.382),#262626)}div.gsc-adBlock,#discovery-top{display:none !important}.cse .gsc-control-cse,.gsc-control-cse{background-color:#262626 !important;border:none !important}.gs-result .gs-title,.gs-result .gs-title *{color:#75A6C4 !important;text-decoration:none !important}.gs-result .gs-title:hover,.gs-result .gs-title *:hover{text-decoration:underline !important}.gsc-preview-reviews,.gsc-control-cse .gs-snippet,.gsc-control-cse .gs-promotion em,.gsc-control-cse .gs-snippet,.gsc-control-cse .gs-promotion em,.gsc-result-info,.gsc-orderby-label{color:#d9d9d9 !important}.gsc-webResult.gsc-result{border:none !important}.gsc-above-wrapper-area{border-bottom:none !important}.gsc-control-cse,.gsc-control-cse *{box-sizing:content-box}.gsc-result .gs-title{height:auto !important}.gsc-selected-option-container{background-color:#262626 !important;background-image:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuNSIgeTE9IjAuMCIgeDI9IjAuNSIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzI2MjYyNiIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzQwNDA0MCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==') !important;background-size:100%;background-image:-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #262626),color-stop(100%, #404040)) !important;background-image:-moz-linear-gradient(top, #262626,#404040) !important;background-image:-webkit-linear-gradient(top, #262626,#404040) !important;background-image:linear-gradient(to bottom, #262626,#404040) !important}.gsc-selected-option-container{color:#d9d9d9 !important}.gsc-control-cse .gsc-option-menu{background:#262626 !important;border:1px solid rgba(38,38,38,0.2);box-shadow:0 2px 4px #262626}.gsc-option-menu-item{color:#d9d9d9 !important}.gsc-option-menu-item-highlighted{background-color:#404040 !important;border-color:#d9d9d9 !important;color:#d9d9d9 !important}.gsc-results .gsc-cursor-box .gsc-cursor-current-page{color:#75A6C4 !important;cursor:pointer !important;background-color:#262626 !important}.gs-result a.gs-visibleUrl,.gs-result .gs-visibleUrl{color:forestgreen !important}.gsc-result-info{padding-top:.78947rem !important;padding-bottom:.78947rem !important}.cse .gsc-control-cse,.gsc-control-cse,.gsc-above-wrapper-area,.gcsc-branding,.gsc-results,.gs-result a.gs-visibleUrl,.gs-result .gs-visibleUrl,.gsc-table-result,.gsc-thumbnail-inside,.gsc-url-top{padding:0 !important}td.gcsc-branding-text div.gcsc-branding-text{margin:0 !important;padding:0 !important}img.gsc-branding-img,img.gsc-branding-img-noclear,img.gcsc-branding-img,img.gcsc-branding-img-noclear{vertical-align:middle !important}.gsc-webResult .gsc-result{background-color:#262626 !important;padding-top:1.57895rem !important;padding-bottom:0 !important}.gsc-results .gsc-cursor-box{margin-top:1.57895rem !important;margin-bottom:1.57895rem !important}.hljs,.hljs-tag,.css .hljs-rules,.css .hljs-value,.css .hljs-function .hljs-preprocessor,.hljs-pragma{color:#d9d9d9}.hljs-strongemphasis,.hljs-strong,.hljs-emphasis{color:#a8a8a2}.hljs-bullet,.hljs-blockquote,.hljs-horizontal_rule,.hljs-number,.hljs-regexp,.alias .hljs-keyword,.hljs-literal,.hljs-hexcolor{color:#ae81ff}.hljs-tag .hljs-value,.hljs-code,.hljs-title,.css .hljs-class,.hljs-class .hljs-title:last-child{color:#a6e22e}.hljs-link_url{font-size:80%}.hljs-strong,.hljs-strongemphasis{font-weight:bold}.hljs-emphasis,.hljs-strongemphasis,.hljs-class .hljs-title:last-child{font-style:italic}.hljs-keyword,.hljs-function,.hljs-change,.hljs-winutils,.hljs-flow,.lisp .hljs-title,.clojure .hljs-built_in,.nginx .hljs-title,.tex .hljs-special,.hljs-header,.hljs-attribute,.hljs-symbol,.hljs-symbol .hljs-string,.hljs-tag .hljs-title,.hljs-value,.alias .hljs-keyword:first-child,.css .hljs-tag,.css .unit,.css .hljs-important{color:#D12060}.hljs-function .hljs-keyword,.hljs-class .hljs-keyword:first-child,.hljs-constant,.css .hljs-attribute{color:#66d9ef}.hljs-variable,.hljs-params,.hljs-class .hljs-title{color:#f8f8f2}.hljs-string,.css .hljs-id,.hljs-subst,.haskell .hljs-type,.ruby .hljs-class .hljs-parent,.hljs-built_in,.django .hljs-template_tag,.django .hljs-variable,.smalltalk .hljs-class,.django .hljs-filter .hljs-argument,.smalltalk .hljs-localvars,.smalltalk .hljs-array,.hljs-attr_selector,.hljs-pseudo,.hljs-addition,.hljs-stream,.hljs-envvar,.apache .hljs-tag,.apache .hljs-cbracket,.tex .hljs-command,.hljs-prompt,.hljs-link_label,.hljs-link_url{color:#e6db74}.hljs-comment,.hljs-javadoc,.java .hljs-annotation,.python .hljs-decorator,.hljs-template_comment,.hljs-pi,.hljs-doctype,.hljs-deletion,.hljs-shebang,.apache .hljs-sqbracket,.tex .hljs-formula{color:#75715e}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata,.xml .php,.php .xml{opacity:0.5}ul#tags{font-family:"Open Sans Condensed",sans;clear:both;list-style:none;line-height:3.15789rem;padding:0}@media (min-width: 45em){ul#tags{clear:none}}ul#tags li{float:left;line-height:1.26316rem;margin-top:.94737rem;margin-left:0.4rem}@media (min-width: 45em){ul#tags li{float:right}}ul#tags li a{font-size:17px;color:#000;background:#75A6C4;border-radius:3px;padding-left:0.2rem;padding-right:0.2rem;padding-bottom:0.1rem;cursor:pointer}ul#tags li a:hover{background:#a9c8da;outline:none}#article-time{float:left;font-family:"Open Sans Condensed",sans;font-size:1.31579rem;line-height:3.15789rem;color:#999}#livefyre-comments{padding-top:3.15789rem;font-family:"Open Sans Condensed",sans}#livefyre-comments p{font-family:Alegreya,sans-serif}#livefyre-comments .fyre .fyre-help{display:none}#livefyre-comments .fyre .fyre-login-bar{font-family:inherit}#livefyre-comments .fyre .fyre-comment-article,#livefyre-comments .fyre .fyre-comment-stream{font-family:inherit;font-size:1rem;line-height:1.57895rem;margin:0}#livefyre-comments .fyre .fyre-comment{margin:0}#livefyre-comments .fyre .fyre-comment p{margin-bottom:1.57895rem;line-height:1.57895rem}#livefyre-comments .fyre .fyre-comment p:last-child{margin-bottom:0}#livefyre-comments .fyre .fyre-comment a.fyre-comment-edit{font-size:17px}#livefyre-comments .fyre .fyre-comment-footer{margin:0;padding:0;line-height:1.57895rem;height:1.57895rem;font-family:"Open Sans Condensed",sans}#livefyre-comments .fyre .fyre-comment-actions{margin-top:0;font-size:17px}#livefyre-comments .fyre .fyre-comment-actions a:hover{text-decoration:none}#livefyre-comments .fyre .fyre-comment-like,#livefyre-comments .fyre .fyre-comment-reply,#livefyre-comments .fyre .fyre-comment-like-count,#livefyre-comments .fyre .fyre-comment-like-btn{font-size:17px}#livefyre-comments .fyre .fyre-stream-stats span{line-height:1.57895rem}#livefyre-comments .fyre .fyre-stream-stats .fyre-comment-count{font-family:inherit;font-weight:normal;font-size:1.31579rem;line-height:1.57895rem}#livefyre-comments .fyre .fyre-livecount{top:auto;position:static}#livefyre-comments .fyre .fyre-auth{margin-top:1.57895rem}#livefyre-comments .fyre .fyre-stream-stats,#livefyre-comments .fyre .fyre-box-wrapper a.fyre-user-profile-link,#livefyre-comments .fyre .fyre-stream-livecount,#livefyre-comments .fyre .fyre-comment-stream,#livefyre-comments .fyre .fyre-comment-actions{color:#d9d9d9}#livefyre-comments .fyre .fyre-box-wrapper:hover{background:none}#livefyre-comments .fyre .fyre-box-list{background:none repeat scroll 0% 0% #262626;color:#d9d9d9}#livefyre-comments .fyre .fyre-box-list li a{color:#d9d9d9}#livefyre-comments .fyre .fyre-box-list li a:hover{color:#262626;background-color:#d9d9d9}#livefyre-comments .fyre .fyre-user-loggedout{color:#d9d9d9}#livefyre-comments .fyre .fyre-user-loggedout,#livefyre-comments .fyre .fyre-stream-sort,#livefyre-comments .fyre .fyre-stream-stats,#livefyre-comments .fyre .fyre-stream-livecount{font-family:inherit;font-size:17px;line-height:1.57895rem}#livefyre-comments .fyre .fyre-moderator{display:none}#livefyre-comments .fyre a{color:#75A6C4}#livefyre-comments .fyre a:hover{color:#a9c8da}#livefyre-comments .fyre .fyre-stream-sort{border:none;margin:0;padding-top:.78947rem;padding-bottom:.78947rem;line-height:1.57895rem}#livefyre-comments .fyre .fyre-comment-article{margin-top:1.57895rem}#livefyre-comments .fyre .fyre-comment-head{position:relative}#livefyre-comments .fyre .fyre-comment-head .fyre-comment-username::before{content:"";position:absolute;width:100%;height:0px;background:none;border:0;border-top:0.056rem solid rgba(38,38,38,0.5);border-bottom:0.056rem solid rgba(217,217,217,0.2)}#livefyre-comments .fyre .fyre-comment-divider{display:none}#livefyre-comments .fyre .fyre-comment-wrapper time.fyre-comment-date{font-size:17px}#livefyre-comments .fyre-editor{margin:0;padding-top:2.36842rem}#livefyre-comments .fyre-editor .fyre-editor-container .fyre-editor-editable{color:#d9d9d9;background-color:transparent;font-family:inherit;font-size:1rem;line-height:1.57895rem;overflow:hidden;padding:.78947rem}#livefyre-comments .fyre-editor .fyre-editor-container .fyre-editor-editable p{line-height:1.5}#livefyre-comments .fyre-editor .fyre-editor-toolbar{height:60px}#livefyre-comments .fyre-editor .fyre-editor-toolbar .goog-toolbar>div{color:#d9d9d9;background-image:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuNSIgeTE9IjAuMCIgeDI9IjAuNSIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzI2MjYyNiIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzNiM2IzYiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');background-size:100%;background-image:-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #262626),color-stop(100%, #3b3b3b));background-image:-moz-linear-gradient(top, #262626,#3b3b3b);background-image:-webkit-linear-gradient(top, #262626,#3b3b3b);background-image:linear-gradient(to bottom, #262626,#3b3b3b)}#livefyre-comments .fyre-editor .fyre-editor-toolbar .goog-toolbar>div.fyre-format-button{display:none}#livefyre-comments .fyre-editor .fyre-editor-toolbar .goog-toolbar>div.fyre-mention-button{border-bottom:1px solid #a1a1a1;border-left:1px solid #a1a1a1;-moz-border-radius:0 0 0 5px;-webkit-border-radius:0;border-radius:0 0 0 5px}#livefyre-comments .fyre-editor .fyre-editor-toolbar .goog-toolbar>div.fyre-mention-button>div{background:url("/img/sprites.png") no-repeat scroll 9px -57px transparent}#livefyre-comments .fyre-editor .fyre-editor-toolbar .goog-toolbar>div.fyre-embed-button>div{background:url("/img/sprites.png") no-repeat scroll 8px -121px transparent}#livefyre-comments .fyre-editor .fyre-editor-toolbar .goog-toolbar>div.fyre-button-left .fyre-button-left-outer-box .fyre-button-left-inner-box{text-shadow:none}#livefyre-comments .fyre-editor .fyre-editor-toolbar .goog-toolbar>div.fyre-button-right.fyre-post-button .fyre-button-right-outer-box .fyre-button-right-inner-box{color:#d9d9d9;text-shadow:none}#livefyre-comments .fyre-editor .fyre-editor-toolbar .fyre-share-container{background-color:#262626}#livefyre-comments .fyre-editor .fyre-editor-toolbar .fyre-share-container span>a{color:#d9d9d9}#livefyre-comments .fyre-editor .fyre-editor-toolbar .fyre-share-container span>a:hover{color:#262626;background-color:#d9d9d9}#livefyre-comments .fyre-editor .fyre-editor-toolbar .fyre-format-toolbar{background-color:#262626}#livefyre-comments .fyre-editor .fyre-editor-toolbar .fyre-mention-menu{background-color:#262626}#livefyre-comments .fyre-editor .fyre-editor-toolbar .fyre-mention-menu .fyre-mention-item{height:auto}.my-name{font-family:Constantia,"Lucida Bright",Lucidabright,"Lucida Serif",Lucida,"DejaVu Serif","Bitstream Vera Serif","Liberation Serif",Georgia,serif;font-size:90%}#github-ribbon{position:fixed;width:200px;top:2.36842rem;margin-top:34px;right:-50px;-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg);background-color:#FF7F00;background-image:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuNSIgeTE9IjAuMCIgeDI9IjAuNSIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjAiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4xNSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');background-size:100%;background-image:-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, rgba(0,0,0,0)),color-stop(100%, rgba(0,0,0,0.15)));background-image:-moz-linear-gradient(top, rgba(0,0,0,0),rgba(0,0,0,0.15));background-image:-webkit-linear-gradient(top, rgba(0,0,0,0),rgba(0,0,0,0.15));background-image:linear-gradient(to bottom, rgba(0,0,0,0),rgba(0,0,0,0.15));font-family:HelveticaNeue,"Helvetica Neue",HelveticaNeueRoman,HelveticaNeue-Roman,"Helvetica Neue Roman",TeXGyreHerosRegular,Helvetica,Tahoma,Geneva,Arial,sans-serif;font-weight:bold;font-size:15px;padding:2px 0;z-index:10;pointer-events:auto}#github-ribbon a,#github-ribbon a:hover{color:#404040;text-decoration:none;display:inline-block;text-align:center;width:200px;border-width:1px 0;border-style:dashed;border-color:#404040}.pagination{font-family:"Open Sans Condensed",sans;font-weight:bold;margin-top:3rem;text-align:center}.pagination li{display:inline;margin-left:0.5rem;margin-right:0.5rem}.pagination .disabled{color:#999}

        </style>

        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/highlight.min.js"></script>
<script>
    hljs.configure({languages: []}); 
    hljs.initHighlightingOnLoad();
</script>


        <script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$','$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true
    },
    options: {
      enableMenu: false,
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
  };
</script>
<script src="//polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript" id="MathJax-script" async src="//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>


    </head>
    <body>
        <header id="top-header">
            <div class="container">
                <h1 id="logo">
                    <a rel="home" id="site-title" href="/"><strong>@h12.io</strong></a>
                </h1>
                <nav>
                    <input type="checkbox" id="nav-toggle-check">
                    <label id="nav-toggle-button" for="nav-toggle-check" class="icon-menu"></label>
                    <div id="nav-content">
                        <div id="nav-links">
                            <h2><a href="/article" data-nav="Article">
                                <i class="icon-article"></i><span>Article</span>
                            </a></h2>
                            <h2><a href="/project" data-nav="Project">
                                <i class="icon-project"></i><span>Project</span>
                            </a></h2>
                            <h2><a href="/note" data-nav="Note">
                                <i class="icon-note"></i><span>Note</span>
                            </a></h2>
                            
                            <h2><a href="/about" data-nav="About">
                                <i class="icon-about"></i><span>About</span>
                            </a></h2>
                        </div>
                        <form class="nav-search-form" action="/search">
                            <input type="text" class="nav-search-box" name="q" required="required"/>
                        </form>
                    </div>
                </nav>
            </div>
        </header>

        <main class="container">
        
        
            <article class="frontpage">
                <h1>
                    <a href="http://h12.io/note/install-ca-android/">How to install a self-signed CA Certificate to Android 4.4</a>
                    <span class="line"></span>
                </h1>
                <span class="time">17 January 2015</span>
                <div class="article-body hyphenate">
                    <p>See this blog <a href="https://samhobbs.co.uk/2013/12/remove-network-may-be-monitored-by-an-unknown-third-party-in-android-4-4-kitkat"><em>Remove &ldquo;Network May Be Monitored by an Unknown Third Party&rdquo; in Android 4.4 KitKat</em></a>.</p>

                </div>
            </article>
        
            <article class="frontpage">
                <h1>
                    <a href="http://h12.io/note/new-domain-h12/">A Shorter Domain Name</a>
                    <span class="line"></span>
                </h1>
                <span class="time">16 December 2014</span>
                <div class="article-body hyphenate">
                    <p>This year, I decided not to renewal the previous domain name (hailiang.ws) last
year, but to register a shorter one. There are two reasons:</p>

<ol>
<li>Both the site URL and the email address will be cleaner.</li>
<li>A more friendly Go import path will be possible for my repositories on Github.</li>
</ol>

<p>After comparing various choices on major domain providers, I chose <code>h12.io</code> as
the new domain. It is the shortest but still meaningful domain that I can afford.
<code>H</code> is the initial letter of my given name, <code>12</code> is simply the number of letters
of my full name, and <code>.me</code> is a top level domain quite suitable for a personal
website.</p>

                </div>
            </article>
        
            <article class="frontpage">
                <h1>
                    <a href="http://h12.io/project/gombi/">Gombi: Creating Your Own Parser is Easier than Regular Expressions</a>
                    <span class="line"></span>
                </h1>
                <span class="time">7 August 2014</span>
                <div class="article-body hyphenate">
                    

<p>Gombi is a combinator-style scanner &amp; parser library written in Go. It is
practical, reasonably fast and extremely easy to use.</p>

<h2 id="quick-start">Quick start</h2>

<pre><code class="language-bash">go get -u h12.io/gombi
</code></pre>

<h2 id="design">Design</h2>

<p><a href="http://en.wikipedia.org/wiki/Parser_combinator">Combinator parsers</a> are
straightforward to construct, modular and easily maintainable, compared to
parser generators like Lex/Yacc.</p>

<ul>
<li>Internal DSL

<ul>
<li>no additional code generation and compilation.</li>
</ul></li>
<li>Composable

<ul>
<li>a subset of the syntax tree is also a parser.</li>
<li>a language can be easily embedded into another one.</li>
</ul></li>
</ul>

<p>Gombi is inspired by but not limited to parser combinators. Unlike a combinator
parser, Gombi neither limits its API to functional only, nor limits its
implementation to functional combinators. Go is not a pure functional language
as Haskell, so cloning a combinator parser like Parsec to Go will only lead to
an implementaion much worse than Parsec. Instead, Gombi is free to choose any Go
language structures that are suitable for a modular and convenient API, and any
algorithms that can be efficiently implemented in Go.</p>

<p><em>Under development</em></p>

                </div>
            </article>
        
            <article class="frontpage">
                <h1>
                    <a href="http://h12.io/note/parser-combinator-links/">Learning Resources on Parser Combinator</a>
                    <span class="line"></span>
                </h1>
                <span class="time">4 August 2014</span>
                <div class="article-body hyphenate">
                    <ul>
<li><a href="http://eprints.nottingham.ac.uk/237/"><em>Monadic Parser Combinators</em></a></li>
<li><a href="http://legacy.cs.uu.nl/daan/pubs.html#parsec"><em>Parsec: Direct Style Monadic Parser Combinators for the Real World</em></a></li>
<li><a href="http://www.cs.tufts.edu/~nr/cs257/archive/doaitse-swierstra/combinator-parsing-tutorial.pdf"><em>Combinator Parsing: A Short Tutorial</em></a></li>
</ul>

                </div>
            </article>
        
            <article class="frontpage">
                <h1>
                    <a href="http://h12.io/note/hyphen-res/">Resources on Offline Hyphenation</a>
                    <span class="line"></span>
                </h1>
                <span class="time">30 July 2014</span>
                <div class="article-body hyphenate">
                    <p><a href="http://caniuse.com/css-hyphens">CSS hyphenation</a> is supported by latest version
of Firefox, Safari &amp; IE. However, Chrome does not support it. Though
<a href="https://code.google.com/p/hyphenator/">Hyphenator.js</a> can solve this problem,
it runs in the browser and affects the rendering speed of above-the-fold content.
So there is only one option left: soft hyphen (<code>U+00AD</code>, <code>&amp;shy;</code>).</p>

<p>Here is a list of resources that leads to its implementation:</p>

<ul>
<li>An <a href="https://code.google.com/p/hyphenator/wiki/en_CSS3Hyphenation">article</a> about CSS3 hyphenation by Hyphenator.js</li>
<li><a href="http://hunspell.sourceforge.net/">Hunspell</a>: the spell checker &amp; hyphenator
used by LibreOffice</li>
<li><a href="http://extensions.libreoffice.org/extension-center/american-british-canadian-spelling-hyphen-thesaurus-dictionaries">English Dictionary</a> of LibreOffice</li>
<li><a href="https://github.com/Kozea/Pyphen">Pyphen</a>: A Python hyphenator using Hunspell
dictionary file</li>
<li>A test <a href="http://clagnut.com/sandbox/softhyphen/">page</a> for soft hyphen</li>
</ul>

                </div>
            </article>
        
            <article class="frontpage">
                <h1>
                    <a href="http://h12.io/article/learn-haskell/">Learning Haskell the Hard Way</a>
                    <span class="line"></span>
                </h1>
                <span class="time">26 July 2014</span>
                <div class="article-body hyphenate">
                    

<p>When I was reading the <a href="http://www.haskell.org/haskellwiki/Learning_Haskell">collection</a> of learning resources on Haskell and tried to find a good start, I quickly realized that
none of the books or tutorials are suitable for me: the easier a tutorial claims
to be, the harder to really understand Haskell by reading it. What I need is a
terse documentation that introduces the syntax and semantics of Haskell
systematically and clearly, but unfortunately none was found.</p>

<p>I know I have to try the hard way: reading the
<a href="http://www.haskell.org/haskellwiki/Language_and_library_specification">Haskell language specification</a>
directly and absorb it myself. To make the process less dull and record my
progress, I will write down my learning notes here incrementally.</p>

<h2 id="overview">Overview</h2>

<p>A Haskell program is organized with four levels: <em>modules</em>, <em>declarations</em>,
<em>expressions</em> &amp; <em>lexical structures</em>, but the specification is organized in the
reverse order.</p>

<p>Haskell has <em>ad hoc</em> polymorphism (<em>overloading</em>) and <em>parametric</em> polymorphism
(Hindley-Milner type structure).</p>

<p>Haskell has six namespaces:</p>

<ul>
<li>for value

<ul>
<li>variable</li>
<li>constructor</li>
</ul></li>
<li>for type entity

<ul>
<li>type variable</li>
<li>type constructor</li>
<li>type class</li>
</ul></li>
<li>module</li>
</ul>

<p>The same name can be reused without conflicts as long as they are in different
namespaces.</p>

<h2 id="lexical-structure">Lexical Structure</h2>

<p>A Haskell program is composed of lexemes (tokens) and whitespaces.</p>

<pre><code>program → { lexeme | whitespace } 
</code></pre>

<p>Whitespace includes:</p>

<ul>
<li>The complete set of whitespace in both ASCII &amp; Unicode</li>
<li>Two kinds of comments

<ul>
<li>inline comment starts with <code>--</code></li>
<li>nested comment wrapped by <code>{- -}</code></li>
</ul></li>
</ul>

<p>A lexeme is one of the following:</p>

<ul>
<li>identifier

<ul>
<li>qvarid: (qualified) variable identifier</li>
<li>qconid: (qualified) constructor identifier</li>
<li>reservedid: reserved identifier</li>
</ul></li>
<li>operator

<ul>
<li>qvarsym: (qualified) variable (symbolic) operator</li>
<li>qconsym: (qualified) constructor (symbolic) operator</li>
<li>reservedop: reserved operator</li>
</ul></li>
<li>literal: integer, float, character or string literal</li>
<li>special: one of special symbols <code>()[]{}`,;</code></li>
</ul>

<p>A variable and a constructor is distinguished by the first character and put into
different namespaces:</p>

<ul>
<li>identifier

<ul>
<li>variable: lower case (including underscore)</li>
<li>constructor: upper case</li>
</ul></li>
<li>operator

<ul>
<li>variable: non-colon</li>
<li>constructor: colon <code>:</code></li>
</ul></li>
</ul>

<p>A variable or constructor can contain symbol <code>'</code>, so the common mathematical
term &ldquo;x prime&rdquo; can be represented as <code>x'</code>.</p>

<p>By using layout rule (indentation), symbols <code>{};</code> can be omitted in sereral
grammer productions.</p>

<h2 id="expressions">Expressions</h2>

<h3 id="parentheses">Parentheses</h3>

<p><code>(exp)</code> is a <em>parenthesized expression</em>, and is equivalent to <code>exp</code>.</p>

<h3 id="function-operator-application">Function &amp; operator application</h3>

<p>Function is prefixed and curried, so <code>f x y</code> means <code>(f x) y</code>.</p>

<pre><code>fexp    → [fexp] aexp
</code></pre>

<p>All operators are infixed except prefix negation <code>-</code>.</p>

<pre><code>infixexp→ lexp qop infixexp
        | - infixexp    (prefix negation)
        | lexp
qop     → qvarop | qconop
</code></pre>

<p>An operator can be converted to prefix notation by parentheses. e.g.</p>

<pre><code>(+) x y
</code></pre>

<p>Reversely, a function identifier (either variable or constructor) can be
converted to an infix operator by backquotes.</p>

<pre><code>x `op` y
</code></pre>

<h3 id="list-tuple">List &amp; Tuple</h3>

<p>List is constructed with <code>:</code>.</p>

<pre><code>1:2:3:[]   or   (:) 1 ((:) 2 ((:) 3 []))
</code></pre>

<p><em>Arithmetic sequence</em> is another way to construct a list.</p>

<pre><code>[1,3..6] == [1,3,5]
  [1..6] == [1,2,3,4,5,6]
</code></pre>

<p>Tuple is constructed with <code>(,...,)</code>.</p>

<pre><code>(1, 2, &quot;a&quot;)   or   (,,) 1 2 &quot;a&quot;
</code></pre>

<h3 id="field-label">Field label</h3>

<p>A field label is used to give a name to a field in a datatype. It can be used to
construct, extract and update the field.</p>

<p>A constructor with labeled fields:</p>

<pre><code>aexp    → qcon { fbind1 , … , fbindn }  (n ≥ 0)
fbind   → qvar = exp 
</code></pre>

<h3 id="pattern-matching">Pattern matching</h3>

<p>A pattern itself is not an expression, but it is an important part of sereral
expressions, including: <em>lambda abstractions</em>, <em>function definitions</em>,
<em>let expressions</em>, <em>list comprehensions</em>, <em>do expressions</em> and <em>case expressions</em>.</p>

<p>Pattern matching is used to deconstruct values according to their type
specification. It proceeds from left to right, and outside to inside. Attempting
to match a pattern can have one of three results:</p>

<ul>
<li>Fail</li>
<li>Succeed: returning a binding for each variable in the pattern</li>
<li>Diverge: i.e. return ⊥</li>
</ul>

<p>The syntax for patterns covers a subset of expressions.</p>

<p>A pattern can match against infix expressions, but limited to infix constructors
(the operator must be <code>qconop</code>).</p>

<pre><code>pat     → lpat qconop pat (infix constructor)
</code></pre>

<p>A pattern can match against constructor functions (with or without field labels).</p>

<pre><code>pat     → ...
        | lpat

lpat    → apat
        | gcon apat1 … apatk    (arity gcon  =  k, k ≥ 1) 

apat    → ...
        | gcon  (arity gcon  =  0)
        | qcon { fpat1 , … , fpatk }    (labeled pattern, k ≥ 0)

fpat    → qvar = pat 
</code></pre>

<p>A pattern can match against a variable, a literal, a parenthesized expression,
a tuple or a list.</p>

<pre><code>lpat    → var ...
        | - (integer | float)   (negative literal) 

apat    → ...
        | literal
        | ( pat )               (parenthesized pattern)
        | ( pat1 , … , patk )   (tuple pattern, k ≥ 2)
        | [ pat1 , … , patk ]   (list pattern, k ≥ 1)
</code></pre>

<p>The variables defined within the pattern can be binded, but how to name and bind
the whole pattern? This is exactly what an <em>as pattern</em> does (<code>var</code> before <code>@</code>
is the name for the whole pattern).</p>

<pre><code>apat    → var [ @ apat] (as pattern) 
</code></pre>

<p>Wildcard is used when you need a variable placeholder but do not want to bind
the value to a name.</p>

<pre><code>apat    → ...
        | _     (wildcard)
</code></pre>

<p>Sometimes you need a pattern that can never fail (only succeed or diverge), it
is called a irrefutable pattern.</p>

<pre><code>apat    → ...
        | ~ apat        (irrefutable pattern)
</code></pre>

<p>Besides <code>~apat</code>, these patterns are also irrefutable: a variable, a wildcard,
<code>N apat</code> where N is a constructor defined by newtype and apat is irrefutable,
<code>var@apat</code> where apat is irrefutable. All other patterns are refutable.</p>

<h3 id="case-expression">Case expression</h3>

<p>Case expression is very important because all other pattern matching expressions
ultimately translate into case expressions.</p>

<p>A case expression has one or more alternatives.</p>

<pre><code>lexp    → case exp of { alts }
alts    → alt1 ; … ; altn       (n ≥ 1) 
</code></pre>

<p>An alternative is either a pattern or empty. The pattern either coresponds to
an expression (body) directly, or has one or more guarded patterns (note an
optional gdpat appears at the right side of itself). A guarded pattern starts
with <code>|</code> and is composed of one or more guards.</p>

<pre><code>alt     → pat -&gt; exp [where decls]
        | pat  gdpat [where decls]
        | (empty alternative) 
gdpat   → guards -&gt; exp [ gdpat ]
guards  → | guard1, …, guardn   (n ≥ 1)
decls   → { decl1 ; … ; decln } (n ≥ 0) 
</code></pre>

<p>Note that each alternative can optionally have a <code>where</code> declaration. It is used
to bind extra variables to be used in the local scope.</p>

<p>There are two types of guards: <em>pattern guard</em> &amp; <em>boolean guard</em>, and local
declarations can also be introduced together with guards.</p>

<pre><code>guard   → pat &lt;- infixexp     (pattern guard)
        | let decls           (local declaration)
        | infixexp            (boolean guard)
</code></pre>

<p>This is how a case expression works:</p>

<ol>
<li>The expression after <code>case</code> is matched against each alternative till a match
is found.</li>
<li>Then each guarded pattern in the matched alterantive is tested till one
passes. A guarded pattern passes if and only if all of its guards pass.</li>
<li>If successful, the conresponding expression is returned, otherwise, the next
guarded pattern or alternative is tried sequentially.</li>
<li>If no match can be found, the result is ⊥.</li>
</ol>

<h3 id="lambda-expression">Lambda expression</h3>

<p>Lambda is used to construct a function without a name. Besides a variable, the
input can also be any pattern.</p>

<pre><code>lexp    → \ apat1 … apatn -&gt; exp        (n ≥ 1)
</code></pre>

<p>An example:</p>

<pre><code>(\ (x, y) -&gt; x+y) (3, 7)
</code></pre>

<p>Also note that lambda <code>-&gt;</code> associates to the right, e.g.</p>

<pre><code>Integer -&gt;  Integer -&gt; Integer
    is equivalent to
Integer -&gt; (Integer -&gt; Integer)
</code></pre>

<h3 id="let-expression">Let expression</h3>

<p>A let expression introduces a nested, lexically-scoped, mutually-recursive list
of declarations. <code>exp</code> after keyword <code>in</code> is the value of a let expression.</p>

<pre><code>lexp    → let decls in exp
decls   → { decl1 ; … ; decln } (n ≥ 0) 
</code></pre>

<p>Some examples:</p>

<pre><code>let {} in 42
let {(x,y) = (1,2)} in x+y
</code></pre>

<h3 id="list-comprehension">List comprehension</h3>

<p>A list comprehension constructs a list of elements represented by <code>exp</code> qualified
by one or more qualifiers.</p>

<pre><code>aexp    → [ exp | qual1 , … , qualn ]   (n ≥ 1)
</code></pre>

<p>There are three kinds of qualifiers.</p>

<p>A generator is composed of a pattern (<code>pat</code> with type <code>t</code>) and a list (<code>e</code> with
type <code>[t]</code>). The pattern is matched against and binded to each element of the
list one by one, so the binded variables can be used to generate each element of
the result list. The generators are evaluated in a nested, depth-first order,
and a failed match is just skipped over.</p>

<pre><code>qual    → pat &lt;- e      (generator)
</code></pre>

<p>A qualifier can also be a local declaration to bind auxiliary variables, or a
boolean guard to exclude some elements from the list.</p>

<pre><code>qual    → ...
        | let decls     (local declaration)
        | exp           (boolean guard) 
</code></pre>

<h3 id="do-expression">Do expression</h3>

<p><em>Wait till monad is fully understood.</em></p>

<h3 id="type-signature">Type signature</h3>

<p>Haskell has type inference, but an expression can be optionally specified with a
<em>type signature</em>.</p>

<pre><code>exp     → infixexp :: [context =&gt;] type
</code></pre>

<h2 id="declarations">Declarations</h2>

<p>There are top declarations (<code>topdecl</code>) that are only allowed at the top level of
a module, and nested declarations (<code>decl</code>) that may be used either at the top
level or in nested scopes.</p>

<pre><code>topdecl → ...
        | ...
        | decl 
</code></pre>

<h3 id="top-declarations">Top declarations</h3>

<p>A top declaration starts with one of the keywords: <code>data</code>, <code>type</code>, <code>newtype</code>,
<code>class</code>, <code>instance</code>, <code>default</code> and <code>foreign</code>.</p>

<p><code>data</code>, <code>type</code> and <code>newtype</code> is for declaring new types. <code>class</code> is for
declaring typeclasses and <code>instance</code> is for declaring the membership between
types and typeclasses.</p>

<p>They are explained later one by one.</p>

<h3 id="nested-declarations">Nested declarations</h3>

<p>In the last section, <code>decl</code> appears in the let expression and where clause
without any explanations. Actually, they are nested declarations.</p>

<p>There are five kinds of nested declarations: <em>type signature</em>, <em>fixity</em>,
<em>function binding</em>, <em>pattern binding</em> and <em>empty</em> declartions.</p>

<p>A <em>type signature</em> simply specifies types for variables.</p>

<pre><code>decl    → gendecl
        | ...
gendecl → vars :: [context =&gt;] type
vars    → var1 , …, varn        (n ≥ 1)
</code></pre>

<p>A <em>fixity</em> declaration gives the fixity and binding precedence of one or more
operators.</p>

<pre><code>gendecl → ...
        | fixity [integer] ops
fixity  → infixl | infixr | infix
ops     → op1 , … , opn         (n ≥ 1)
op      → varop | conop 
</code></pre>

<p>The right hand side (<code>rhs</code>) of function and pattern bindings are the same.</p>

<pre><code>decl    → ...
        | (funlhs | pat) rhs
</code></pre>

<p>The syntax of <code>rhs</code> is almost the same as <em>case expression</em>, except <code>-&gt;</code> is
replaced by <code>=</code>.</p>

<pre><code>rhs     → = exp [where decls]
        | gdrhs [where decls]
gdrhs   → guards = exp [gdrhs]
</code></pre>

<p>A function can be binded in multiple function binding declarations, as long as
they are contiguous and the number of patterns is the same. In each of the
declaration, the left hand side supports three alternative syntaxes.</p>

<pre><code>funlhs  → var apat { apat }
        | pat varop pat
        | ( funlhs ) apat { apat }
</code></pre>

<p>And an example:</p>

<pre><code>plus x y z = x+y+z
x ‘plus‘ y = \ z -&gt; x+y+z
(x ‘plus‘ y) z = x+y+z
</code></pre>

<h3 id="type">Type</h3>

<p>Just as an <em>expression</em> may contain variables and denotes a value, a
<em>type expression</em> may contain <em>type variables</em> and denotes a type value (but it
is evaluated at compile time, unlike an expression evaluated at run time).</p>

<p>Type expressions are designed to have similar representations as their
corresponding expressions.</p>

<p>Function type can be represented in infix or prefix notation.
Like function application, <em>type application</em> (<code>btype</code>) is also prefixed and
curried. <code>atype</code> is the type expression excluding infix function type and
type application.</p>

<pre><code>type    → btype [-&gt; type]       (function type)
btype   → [btype] atype         (type application)
atype   → gtycon
        | ...
gtycon  → ...
        | (-&gt;)  (function constructor)
</code></pre>

<p>A <em>type variable</em> is an identifier beginning with a lowercase letter.
A <em>parenthesized type</em> <code>(t)</code> is identical to the type <code>t</code>.
A <em>type constructor</em> (type template) as an identifier begins with an uppercase
letter.
Besides function type, the syntaxes for tuple and list are also special syntaxes.</p>

<pre><code>atype   → gtycon
        | tyvar
        | ( type1 , … , typek ) (tuple type, k ≥ 2)
        | [ type ]              (list type)
        | ( type )              (parenthesised constructor)
gtycon  → qtycon
        | ()            (unit type)
        | []            (list constructor)
        | (-&gt;)          (function constructor)
        | (,{,})        (tupling constructors) 
</code></pre>

<h3 id="kind">Kind</h3>

<p>What is <code>*</code>, <code>* -&gt; *</code>&hellip;? An ordinary type has kind <code>*</code>. A type constructor
(template) that has one type argument has kind <code>* -&gt; *</code>, e.g. a list. So on and
so forth.</p>

<h3 id="context">Context</h3>

<p>The context (<code>context =&gt; type</code>) is used to indicate that type <code>tyvar</code> belongs to
class <code>qtycls</code>.</p>

<p>A context is composed of zero or more class assertions.</p>

<pre><code>context → class
        | ( class1 , … , classn )               (n ≥ 0)
</code></pre>

<p>And a class assertion is either either a type variable, or the application of
type variable to one or more types.</p>

<pre><code>class   → qtycls tyvar
        | qtycls ( tyvar atype1 … atypen )      (n ≥ 1)
qtycls  → [ modid . ] tycls
tycls   → conid
tyvar   → varid 
</code></pre>

<h3 id="algebraic-data-type">Algebraic data type</h3>

<p><em>algebraic data type</em> is named so because it is composed of other types by
product and sum (algebraic operations). It introduces a new type constructor
(<code>simpletype</code>) with zero or more constituent data constructors (<code>constrs</code>).</p>

<pre><code>topdecl → ...
        | data [context =&gt;] simpletype [= constrs] [deriving]
</code></pre>

<p>The type constructor begins with upper case letter and may have zero to more
type variables as parameters. The type constructor then can be used in curried
type application in a type expression.</p>

<pre><code>simpletype      → tycon tyvar1 … tyvark         (k ≥ 0) 
</code></pre>

<p>On the right side of <code>=</code>, sum (alternative) types are separated by <code>|</code>.</p>

<pre><code>constrs → constr1 | … | constrn         (n ≥ 1)
</code></pre>

<p>For each <code>constr</code>, there are three alternative syntaxes.</p>

<ol>
<li>A data constructor followed by zero or more <code>atype</code>.</li>
<li>An infix data constructor operator between two <code>btype</code>.</li>
<li>A data constructor followed by field declarations.</li>
</ol>

<pre><code>constr  → con [!] atype1 … [!] atypek   (arity con  =  k, k ≥ 0)
        | (btype | ! atype) conop (btype | ! atype) (infix conop)
        | con { fielddecl1 , … , fielddecln }       (n ≥ 0) 
con     → conid | ( consym )    (constructor) 
</code></pre>

<p><code>!</code> is strictness flag to indicate that the corresponding constructor argument
is eagerly evaluated.</p>

<h3 id="type-synonym">Type synonym</h3>

<p>A type synonym is equivalent to its definition are completely interchangeable.</p>

<pre><code>topdecl → type simpletype = type
</code></pre>

<h3 id="newtype">Newtype</h3>

<p>A <em>newtype</em> declaration introduces a distinct type whose representation is the
same as an existing type.</p>

<pre><code>topdecl     → newtype [context =&gt;] simpletype = newconstr [deriving]
newconstr   → con atype
            | con { var :: type }
</code></pre>

<ul>
<li>Unlike type synonyms, <code>newtype</code> may be used to define recursive types.</li>
<li>New instances can be defined for a type defined by <code>newtype</code> but may not be
defined for a type synonym.</li>
<li>A type created by <code>newtype</code> has an extra level of indirection compared to an
algebraic datatype, so the pattern matching rule is different.</li>
</ul>

<h3 id="ad-hoc-polymorphism">Ad hoc polymorphism</h3>

<p>Ad hoc polymorphism (overloading) is supported by <em>typeclasses</em>.</p>

<p>A class declaration introduces a new class and the operations (methods) on it.</p>

<h2 id="modules">Modules</h2>

<p><em>To be continued&hellip;</em></p>

                </div>
            </article>
        
            <article class="frontpage">
                <h1>
                    <a href="http://h12.io/note/301-redirect/">About 301 Moved Permanently</a>
                    <span class="line"></span>
                </h1>
                <span class="time">25 July 2014</span>
                <div class="article-body hyphenate">
                    <p>When building a website, there is one inevitable thing:
<a href="http://en.wikipedia.org/wiki/HTTP_301">301 permanent redirection</a>. The cases
that have to involve 301 includes:</p>

<ul>
<li>Redirection from www subdomain to naked domain or vise versa.</li>
<li>Redirection from slashed pretty URL to unslashed URL or vise versa.</li>
</ul>

<p>301 is easy to implement with Go:</p>

<pre><code class="language-go">func redirect301(w http.ResponseWriter, url string) {
    w.Header().Set(&quot;Location&quot;, url)
    w.WriteHeader(http.StatusMovedPermanently)
}
</code></pre>

<p>There is one more thing that needs attention: The root path of a domain always
contains a slash (GET / in HTTP request), regardless the user enters the slash
or not, so the root path needs no redirection.</p>

                </div>
            </article>
        
        <nav class="pagination">
            <span>- 8 -</span>
            <ul>
                <li>
            
                    <a href="/page/7">« Prev</a>
            
                </li>
                <li>
            
                    <a href="/page/9">Next »</a>
            
                </li>
            </ul>
        </nav>
        </main>
        <footer id="site-footer">
            <hr>
            <p>&copy; 2012-22 <span class="my-name">Hǎi-Liàng "Hal" Wáng</span>.<br>
            The content of this page is licensed under <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>, and code is licensed under a <a rel="license" href="/bsd">BSD license</a>.
            </p>
        </footer>

    </body>
</html>
