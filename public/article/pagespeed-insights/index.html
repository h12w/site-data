<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>How to Achieve a Perfect PageSpeed Insights Score | @h12</title>
<meta name="keywords" content="PageSpeed Insights, web, tutorial">
<meta name="description" content="Indtroduction
PageSpeed Insights is
an online tool by Google to measure the performance of an web page for mobile
and desktop devices. It has a set of heuristic rules considering the
network-independent aspects of page performance. Each rule has a weight and the
total score ranges from 0 to 100 points. The desktop and mobile tests have the
same set of rules for performance and mobile test has some extra rules
about user experience.">
<meta name="author" content="Hǎi-Liàng &#34;Hal&#34; Wáng">
<link rel="canonical" href="http://h12.io/article/pagespeed-insights/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.e79680cc8f2e2a0d9f078e6e22c427fd586eec7270ad113adecb066443cb0b97.css" integrity="sha256-55aAzI8uKg2fB45uIsQn/Vhu7HJwrRE63ssGZEPLC5c=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://h12.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://h12.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://h12.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://h12.io/apple-touch-icon.png">
<link rel="mask-icon" href="http://h12.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://h12.io/article/pagespeed-insights/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=PT+Sans+Narrow&family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/fontawesome.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/regular.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/brands.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />












<meta property="og:url" content="http://h12.io/article/pagespeed-insights/">
  <meta property="og:site_name" content="@h12">
  <meta property="og:title" content="How to Achieve a Perfect PageSpeed Insights Score">
  <meta property="og:description" content="Indtroduction PageSpeed Insights is an online tool by Google to measure the performance of an web page for mobile and desktop devices. It has a set of heuristic rules considering the network-independent aspects of page performance. Each rule has a weight and the total score ranges from 0 to 100 points. The desktop and mobile tests have the same set of rules for performance and mobile test has some extra rules about user experience.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="article">
    <meta property="article:published_time" content="2014-07-24T03:42:01+00:00">
    <meta property="article:modified_time" content="2014-07-24T03:42:01+00:00">
    <meta property="article:tag" content="PageSpeed Insights">
    <meta property="article:tag" content="Web">
    <meta property="article:tag" content="Tutorial">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How to Achieve a Perfect PageSpeed Insights Score">
<meta name="twitter:description" content="Indtroduction
PageSpeed Insights is
an online tool by Google to measure the performance of an web page for mobile
and desktop devices. It has a set of heuristic rules considering the
network-independent aspects of page performance. Each rule has a weight and the
total score ranges from 0 to 100 points. The desktop and mobile tests have the
same set of rules for performance and mobile test has some extra rules
about user experience.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Articles",
      "item": "http://h12.io/article/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "How to Achieve a Perfect PageSpeed Insights Score",
      "item": "http://h12.io/article/pagespeed-insights/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "How to Achieve a Perfect PageSpeed Insights Score",
  "name": "How to Achieve a Perfect PageSpeed Insights Score",
  "description": "Indtroduction PageSpeed Insights is an online tool by Google to measure the performance of an web page for mobile and desktop devices. It has a set of heuristic rules considering the network-independent aspects of page performance. Each rule has a weight and the total score ranges from 0 to 100 points. The desktop and mobile tests have the same set of rules for performance and mobile test has some extra rules about user experience.\n",
  "keywords": [
    "PageSpeed Insights", "web", "tutorial"
  ],
  "articleBody": "Indtroduction PageSpeed Insights is an online tool by Google to measure the performance of an web page for mobile and desktop devices. It has a set of heuristic rules considering the network-independent aspects of page performance. Each rule has a weight and the total score ranges from 0 to 100 points. The desktop and mobile tests have the same set of rules for performance and mobile test has some extra rules about user experience.\nThough it might be too rigorous to require 100/100 score for a web site, it is a good way to learn those rules to actually achieve it, and it does have a significant improvement to the load time of my site (load time reduces from more than 1 sec to about 500 ms in the Pingdom Website Speed Test). In the following section, I would like to share what I have learned by optimizing this website to achieve a perfect score, rule by rule.\nSpeed rules Avoid landing page redirects The redirection to mobile version can be avoided by responsive design (CSS media queries).\nYou cannot avoid redirections completely, e.g. I have a 301 redirection from www subdomain to the naked domain, but the naked domain does not have any further redirection.\nEliminate render-blocking JavaScript and CSS in above-the-fold content This might be the hardest rule to fully comply with.\nFirstly, you need to minimize and fully inline your CSS into HTML, and your CSS cannot be too large. (My CSS is 22kB after minimization). If you use web fonts, you should directly write the @font-face in your inlined CSS, rather than importing an external CSS.\nSecondly, you need to inline or asynchronously load all your scripts. The “async” attribute is not very useful because it cannot control the order of the execution of multiple scripts. I have found HeadJS to solve the problem. HeadJS is inlined into the HTML (3.7kB), and other scripts are loaded asychronously but executed in order.\nFinally, you have to make sure the delayed scripts will not affect the layout of above-the-fold content. You might have to make some trade off and cut off some functionality.\nEnable compression, Leverage browser caching \u0026 Reduce server response time Since I uses Google App Engine, the gzip compression should already been enabled by default, the expiration time for static resources are configurable via config.yaml and GAE responses fast enough.\nMinify Resources (HTML, CSS, and JavaScript) The CSS is minified by Compass, and scripts imported are already minified. The HTML file is not minified but it seems not serious enough to trigger a test warning by PageSpeed.\nOptimize images I use font icons in my site. When there has to be an image, use PNG compressed with OptiPNG.\nReduce the size of the above-the-fold content It basically depends on your design and just remember the YAGNI principle.\nUser experience rules These rule only applies to mobile platforms.\nAvoid plugins None of them on my site.\nConfigure the viewport This is part of the responsive design.\nSize content to viewport An important lesson: never write a URL directly in an article because URL does not wrap well and could overflow out of the viewport width. instead, give the URL a name composed of words.\nSize tap targets appropriately \u0026 Use legible font sizes I have written some lists of links in my notes, which makes those links close to each other. To make them separate enough to pass this rule, the line height cannot be too small, here is the minimal requirement from my tests (font-size/line-height):\n16px/28px 17px/28px 18px/29px 19px/30px 20px/30px Conclusion It is not rocket science to build a website with good performance. You just needs to tune and optimize every detail of your site patiently. In this process, PageSpeed Insights can help a lot.\n",
  "wordCount" : "630",
  "inLanguage": "en",
  "datePublished": "2014-07-24T03:42:01Z",
  "dateModified": "2014-07-24T03:42:01Z",
  "author":{
    "@type": "Person",
    "name": "Hǎi-Liàng \"Hal\" Wáng"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://h12.io/article/pagespeed-insights/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "@h12",
    "logo": {
      "@type": "ImageObject",
      "url": "http://h12.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://h12.io/" accesskey="h" title="@h12 (Alt + H)">@h12</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://h12.io/article/" title="Articles">
                    <span><i class="fas fa-newspaper"></i> Articles</span>
                </a>
            </li>
            <li>
                <a href="http://h12.io/project/" title="Projects">
                    <span><i class="fab fa-github"></i> Projects</span>
                </a>
            </li>
            <li>
                <a href="http://h12.io/qai/" title="Q&amp;AI">
                    <span><i class="fas fa-circle-question"></i> Q&amp;AI</span>
                </a>
            </li>
            <li>
                <a href="http://h12.io/note/" title="Notes">
                    <span><i class="fas fa-sticky-note"></i> Notes</span>
                </a>
            </li>
            <li>
                <a href="http://h12.io/about/" title="About">
                    <span><i class="fas fa-user"></i> About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
 



    <h1 class="post-title entry-hint-parent">
      How to Achieve a Perfect PageSpeed Insights Score
    </h1>
    <div class="post-meta"><span title='2014-07-24 03:42:01 +0000 UTC'>July 24, 2014</span>

</div>
  </header> 
  <div class="post-content"><h2 id="indtroduction">Indtroduction<a hidden class="anchor" aria-hidden="true" href="#indtroduction">#</a></h2>
<p><a href="https://developers.google.com/speed/pagespeed/insights/">PageSpeed Insights</a> is
an online tool by Google to measure the performance of an web page for mobile
and desktop devices. It has a set of heuristic rules considering the
network-independent aspects of page performance. Each rule has a weight and the
total score ranges from 0 to 100 points. The desktop and mobile tests have the
same set of rules for performance and mobile test has some extra rules
about user experience.</p>
<p>Though it might be too rigorous to require 100/100 score for a web site, it is a
good way to learn those rules to actually achieve it, and it does have a
significant improvement to the load time of my site (load time reduces from more
than 1 sec to about 500 ms in the <a href="http://fpt.pingdom.com/">Pingdom Website Speed Test</a>).
In the following section, I would like to share what I have learned by
optimizing this website to achieve a <a href="https://developers.google.com/speed/pagespeed/insights/?url=http%3A%2F%2Fh12.io">perfect score</a>, rule by rule.</p>
<h2 id="speed-rules">Speed rules<a hidden class="anchor" aria-hidden="true" href="#speed-rules">#</a></h2>
<h3 id="avoid-landing-page-redirects">Avoid landing page redirects<a hidden class="anchor" aria-hidden="true" href="#avoid-landing-page-redirects">#</a></h3>
<p>The redirection to mobile version can be avoided by responsive design (CSS media
queries).</p>
<p>You cannot avoid redirections completely, e.g. I have a 301 redirection from www
subdomain to the naked domain, but the naked domain does not have any further
redirection.</p>
<h3 id="eliminate-render-blocking-javascript-and-css-in-above-the-fold-content">Eliminate render-blocking JavaScript and CSS in above-the-fold content<a hidden class="anchor" aria-hidden="true" href="#eliminate-render-blocking-javascript-and-css-in-above-the-fold-content">#</a></h3>
<p>This might be the hardest rule to fully comply with.</p>
<p>Firstly, you need to minimize and fully inline your CSS into HTML, and your CSS
cannot be too large. (My CSS is 22kB after minimization). If you use web fonts,
you should directly write the @font-face in your inlined CSS, rather than
importing an external CSS.</p>
<p>Secondly, you need to inline or asynchronously load all your scripts. The
&ldquo;async&rdquo; attribute is not very useful because it cannot control the order of
the execution of multiple scripts. I have found <a href="http://headjs.com/">HeadJS</a>
to solve the problem. HeadJS is inlined into the HTML (3.7kB), and other scripts
are loaded asychronously but executed in order.</p>
<p>Finally, you have to make sure the delayed scripts will not affect the
layout of above-the-fold content. You might have to make some trade off and cut
off some functionality.</p>
<h3 id="enable-compression-leverage-browser-caching--reduce-server-response-time">Enable compression, Leverage browser caching &amp; Reduce server response time<a hidden class="anchor" aria-hidden="true" href="#enable-compression-leverage-browser-caching--reduce-server-response-time">#</a></h3>
<p>Since I uses Google App Engine, the gzip compression should already been enabled
by default, the expiration time for static resources are configurable via
config.yaml and GAE responses fast enough.</p>
<h3 id="minify-resources-html-css-and-javascript">Minify Resources (HTML, CSS, and JavaScript)<a hidden class="anchor" aria-hidden="true" href="#minify-resources-html-css-and-javascript">#</a></h3>
<p>The CSS is minified by Compass, and scripts imported are already minified. The
HTML file is not minified but it seems not serious enough to trigger a test
warning by PageSpeed.</p>
<h3 id="optimize-images">Optimize images<a hidden class="anchor" aria-hidden="true" href="#optimize-images">#</a></h3>
<p>I use font icons in my site. When there has to be an image, use PNG compressed with
<a href="http://optipng.sourceforge.net/">OptiPNG</a>.</p>
<h3 id="reduce-the-size-of-the-above-the-fold-content">Reduce the size of the above-the-fold content<a hidden class="anchor" aria-hidden="true" href="#reduce-the-size-of-the-above-the-fold-content">#</a></h3>
<p>It basically depends on your design and just remember the YAGNI principle.</p>
<h2 id="user-experience-rules">User experience rules<a hidden class="anchor" aria-hidden="true" href="#user-experience-rules">#</a></h2>
<p>These rule only applies to mobile platforms.</p>
<h3 id="avoid-plugins">Avoid plugins<a hidden class="anchor" aria-hidden="true" href="#avoid-plugins">#</a></h3>
<p>None of them on my site.</p>
<h3 id="configure-the-viewport">Configure the viewport<a hidden class="anchor" aria-hidden="true" href="#configure-the-viewport">#</a></h3>
<p>This is part of the responsive design.</p>
<h3 id="size-content-to-viewport">Size content to viewport<a hidden class="anchor" aria-hidden="true" href="#size-content-to-viewport">#</a></h3>
<p>An important lesson: never write a URL directly in an article because URL does
not wrap well and could overflow out of the viewport width. instead, give the
URL a name composed of words.</p>
<h3 id="size-tap-targets-appropriately--use-legible-font-sizes">Size tap targets appropriately &amp; Use legible font sizes<a hidden class="anchor" aria-hidden="true" href="#size-tap-targets-appropriately--use-legible-font-sizes">#</a></h3>
<p>I have written some lists of links in my notes, which makes those links close to
each other. To make them separate enough to pass this rule, the line height cannot
be too small, here is the minimal requirement from my tests (font-size/line-height):</p>
<ul>
<li>16px/28px</li>
<li>17px/28px</li>
<li>18px/29px</li>
<li>19px/30px</li>
<li>20px/30px</li>
</ul>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>It is not rocket science to build a website with good performance. You just needs
to tune and optimize every detail of your site patiently. In this process,
PageSpeed Insights can help a lot.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://h12.io/tags/pagespeed-insights/">PageSpeed Insights</a></li>
      <li><a href="http://h12.io/tags/web/">Web</a></li>
      <li><a href="http://h12.io/tags/tutorial/">Tutorial</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>
<footer class="footer">
        <p>&copy; 2012-2025, <span class="my-name">Hǎi-Liàng "Hal" Wáng</span>.</p>
        <p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><span property="dct:title">The content of this page</span> is licensed under <a href="https://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-flex;align-items:center;">CC BY 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" alt=""></a></p>
    </footer>


<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
